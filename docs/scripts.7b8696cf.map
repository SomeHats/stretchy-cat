{"version":3,"sources":["../node_modules/pepjs/dist/pep.js","../node_modules/process/browser.js","../node_modules/rebound/dist/rebound.js","../node_modules/invariant/browser.js","scripts/canvas.js","scripts/simulation.js","scripts/draw.js","scripts/index.js"],"names":["process","module","exports","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","Error","defaultClearTimeout","setTimeout","e","clearTimeout","runTimeout","fun","call","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","length","concat","drainQueue","timeout","len","run","nextTick","args","Array","arguments","i","push","Item","array","prototype","apply","title","browser","env","argv","version","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","global","factory","define","amd","rebound","_onFrame","window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","oRequestAnimationFrame","setImmediate","callback","_onFrame$1","slice","bind","func","context","_len","outerArgs","_key","_len2","innerArgs","_key2","extend","target","source","key","hasOwnProperty","onFrame","removeFirst","item","idx","indexOf","splice","colorCache","hexToRGB","colorString","normalizedColor","replace","parts","match","ret","r","parseInt","g","b","rgbToHex","rNum","gNum","bNum","toString","util","Object","freeze","mapValueInRange","value","fromLow","fromHigh","toLow","toHigh","fromRangeSize","toRangeSize","valueScale","interpolateColor","val","startColorStr","endColorStr","undefined","asRGB","startColor","endColor","Math","floor","degreesToRadians","deg","PI","radiansToDegrees","rad","MathUtil","tensionFromOrigamiValue","oValue","origamiValueFromTension","tension","frictionFromOrigamiValue","origamiFromFriction","friction","OrigamiValueConverter","classCallCheck","instance","Constructor","TypeError","_extends","assign","AnimationLooper","springSystem","getSpringSystem","loop","Date","now","SimulationLooper","timestep","time","running","getIsIdle","SteppingSimulationLooper","step","Loopers","BouncyConversion","bounciness","speed","normalize","projectNormal","s","bouncyTension","bouncyFriction","quadraticOutInterpolation","b3Nobounce","startValue","endValue","n","start","end","linearInterpolation","t","b3Friction1","x","pow","b3Friction2","b3Friction3","SpringConfig","fromOrigamiTensionAndFriction","fromBouncinessAndSpeed","bouncyConversion","coastingConfigWithOrigamiFriction","DEFAULT_ORIGAMI_SPRING_CONFIG","PhysicsState","position","velocity","Spring","_startValue","_currentState","_displacementFromRestThreshold","_endValue","_overshootClampingEnabled","_previousState","_restSpeedThreshold","_tempState","_timeAccumulator","_wasAtRest","_id","_ID","_springSystem","destroy","deregisterSpring","getId","setSpringConfig","springConfig","_springConfig","getSpringConfig","setCurrentValue","currentValue","skipSetAtRest","setAtRest","notifyPositionUpdated","getStartValue","getCurrentValue","getCurrentDisplacementDistance","getDisplacementDistanceForState","state","abs","setEndValue","isAtRest","activateSpring","listener","onChange","onSpringEndStateChange","getEndValue","setVelocity","getVelocity","setRestSpeedThreshold","restSpeedThreshold","getRestSpeedThreshold","setRestDisplacementThreshold","displacementFromRestThreshold","getRestDisplacementThreshold","setOvershootClampingEnabled","enabled","isOvershootClampingEnabled","isOvershooting","advance","realDeltaTime","adjustedDeltaTime","MAX_DELTA_TIME_SEC","tempPosition","tempVelocity","aVelocity","aAcceleration","bVelocity","bAcceleration","cVelocity","cAcceleration","dVelocity","dAcceleration","dxdt","dvdt","SOLVER_TIMESTEP_SEC","_interpolate","notifyActivate","notifyAtRest","onSpringActivate","onSpringUpdate","onSpringAtRest","systemShouldAdvance","wasAtRest","alpha","getListeners","newListener","listenerToRemove","currentValueIsApproximately","SpringSystem","looper","_activeSprings","_idleSpringIndices","_isIdle","_lastTimeMillis","_springRegistry","setLooper","createSpring","createSpringWithConfig","createSpringWithBouncinessAndSpeed","spring","registerSpring","getSpringById","id","getAllSprings","vals","deltaTime","pop","currentTimeMillis","ellapsedMillis","onBeforeIntegrate","onAfterIntegrate","springId","index","invariant","condition","format","a","c","d","f","error","argIndex","framesToPop","canvas","document","getElementById","HTMLCanvasElement","ctx","getContext","body","width","clientWidth","height","clientHeight","vw","vh","scale","devicePixelRatio","style","HEAD_TENSION","HEAD_FRICTION","HEAD_DEFAULT_X","HEAD_DEFAULT_Y","isCatHeadLocked","lockCatHead","unlockCatHead","catHeadXSpring","catHeadYSpring","getCatHeadPosition","y","translateCatHead","dx","dy","tick","dt","EYE_COLOR","BOD_COLOR","DETAIL_COLOR","BG_1","BG_2","BG_3","draw","fillStyle","fillRect","beginPath","catHeadPosition","arc","fill","simulation","drag","onPointerDown","startX","clientX","startY","clientY","currentX","currentY","onPointerMove","lastX","lastY","onPointerUp","addEventListener","lastT","hot","dispose","location","reload"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACh8CA;AACA,IAAIA,UAAUC,OAAOC,OAAP,GAAiB,EAA/B;;AAEA;AACA;AEJA,AFKA,ACLA;ADMA;;AAEA,IAAIC,gBAAJ;AACA,IAAIC,kBAAJ;;AAEA,SAASC,gBAAT,GAA4B;AEJ5B,AFKI,UAAM,IAAIC,KAAJ,CAAU,iCAAV,CAAN;AACH,ACLA,WAAUsD,MAAV,EAAkBC,OAAlB,EAA2B;ACC5B,AFKA,ACLC,AERD,SHaStD,ACLDL,OAAP,KAAmB,ODKpB,CCLC,EDK+B,ECLA,OAAOD,MAAP,KAAkB,WAAjD,GAA+DA,OAAOC,OAAP,GAAiB2D,SAAhF,GACA,OAAOC,MAAP,KAAkB,UAAlB,IAAgCA,OAAOC,GAAvC,GAA6CD,OAAOD,OAAP,CAA7C,GACCD,OAAOI,OAAP,GAAiBH,SAFlB;ADMG,ACHH,AKXD,CLOC,EAIC,IAJD,EAIQ,CDGC,IAAIvD,KAAJ,CAAU,CCHC,kCDGX,CAAN;AACH,ACJsB,AGXvB;AJgBC,AKhBD,ACCA,aNea;AACT,ACJJ,MAAI2D,EDII,SCJO,KAAK,CAApB;ADKQ,ACJR,AIbA,ICAYwS,ELaR,MDIQ,CCJDvS,MDIQ1D,ACJf,KAAkB,KDIV,KAAsB,CCJlC,EAAmC,ODI3B,EAAsC;AAClCL,ACJV8D,AEbF,ACDA,IDCM2P,SAASC,EFaF3P,OAAOC,AEbI2P,SHiBOtT,KGjBhB,CAAwB,IHiB3B,ECJC,EEbE,CAAf,CFa6C0D,OAAOE,2BAAvC,IAAsEF,OAAOG,wBAA7E,IAAyGH,OAAOI,uBAAhH,IAA2IJ,OAAOK,sBAA7J;ADKO,ACJR,AIbD,ACDA,IDCMqR,KLeE,MAEO,CKjBG,SAAlB;ALkBYzV,AGlBZ,AECA,IAAM0V,YAAY,SFDRjC,AECV,MLiB+BvT,IGlBXuT,YHkBR,MGlB0BG,iBAAtC,EAAyD,mBAAzD;AHmBS,ACJT,AEdA,AECA,IFDMC,AECA8B,EJaF,CAAC7R,GEdO2P,KFcR,EEdeK,EFcF,AIbI,OJaGjU,CEdZ,CAAkB,IAAlB,CFcK,AEdjB,KFcoC,OIbpC,IJaI,IAA+CA,QAAQqC,KAAR,KAAkB,MAArE,EAA6E;ADKxE,ACJH4B,AIbF,ADHA,ICGM8R,ADHAnB,CJcF,CAME,KKjBO,ELiBAnU,CAAP,CCJO+D,CDIG,GIpBK,CCGrB,CDHA,MHgBE;ACAF,AFKQrE,ACJP,AEdD,AECA,ADHA,IFeI+S,ACbEgB,AECA8B,ADHAnB,ODEOhB,AECA,KHYG,ICbMK,AECtB,ADHsB,CAAtB,GDEA,EDayBf,CFKE9S,QELX,EAAoB+S,MAApB,AFKR,EELoCC,CAA5B,EAA+B1M,CAA/B,EAAkC2M,CAAlC,EAAqCC,CAArC,EAAwC9S,CAAxC,EAA2C+S,CAA3C,EAA8C;AAC5D,AFKG,AGlBL,AECA,ADHA,ICGMyC,ADHAnB,EFeA,KGZO,SAAb,CDHuB,EFeQ,ECbrBZ,IAAV,EAAgB,IDad,CEfF,CFe6C,WCb7C;ADcI,AFKA,ACJJjQ,AGhBA,IAAM8Q,IFeE3B,AFKA,KCJGnP,MCDQgE,EEfI,IHgBA,GCDnB,EAA0B,KDCGxD,CGhBjC,OHgBuB,EAAoB;ACArC,AFKE,ACJNP,AEdF,AECA,IFDMiQ,AECA+B,OJaG1V,AIbI,CHYD,AFKA,AGlBE0T,IDaE5T,CCbG8T,EHkBA1T,CKjBbwV,CHYM,ADCV,CCDoB,ADCFzR,EIbP,GAAM,CFDnB,EFcE,CDIU,CCJkB,IDIM,GCJC,EAAnC,KDIM,EAAwC,oBELpC,CAAN;AACD,AFKOrE,ACJX,AEdD,AECE,ACAF,AFHA,GHcA,CEZMiU,AGCFqC,AFHEhF,OEGkB,EHDTwC,ACFA,CCGTiC,CCAN,EFHmB,CDEC7B,KEClB,GAAgByB,IFDlB,AECE,GLiB+BrV,EIpBN4J,UJoBf,cIpBG,EAAf;AFgBG,AFKM,AGlBT,AECE,ADHF,IDEMiK,ACFA3K,KJkBE,AGhBGuK,KECLiC,CLiBS,EGlBI,ECFE,CDErB,EECE,CAAa,ADHU,CCGvB,EAAgB,CAAhB,cDH+B3E,YAAZ,CAAyBC,MAAzB,CAArB;AJqBYtR,ACJZ,AEdA,AECE,ACDF,IHAMoU,AGAAmC,ELcFjS,GEdO2P,KECL8B,IFDc,CFcHlS,CKdK,CHAtB,EECE,GAAgB+R,CJalB,EKdMW,CDCJ,GLiB+BpW,SMlBX,CAACE,CAAD,EAAmB,MNkB7B;AEJV,AFKO,AGlBT,AECE,ACDAiW,AFFF,IDEMjC,ACFFO,EFeE,CAAC7B,EIbE,GHAKjP,EECRkS,EHYJ,EAAgB,CCbG1B,GECnB,ADHoB,CCGP,CAAb,EAAgB,ADHlB,SDEc,IAA2B,CAAzC,CECE,iBAAgC,eAAhC;AHaE,AFKC,ACJL,AKdIkC,AFFG,IAAM3B,CJcT,CAME,EELExB,IIbIhT,CJaR,AFKSA,CAAP,AMlBQoW,ENkBE,KMnBP,mBFDkB,SAAd5B,WAAc,GAAM;AFgB7B,AFKI7U,AGlBRwT,AECE,ACDEkD,AFFF9B,ODEKb,CDaCf,ICbR,AGAY3S,EDCN4V,ACDQU,CHAC5C,IDaIlM,CEfC,CEAX,EHEcwM,AECrB,CDHA,IFeE,ACbJ,CHkB6BlU,CELC,kBFKtB;AEJFkT,AFKD,ACJL,AEdAG,AECE,ACDEoD,AFFH,CAFM,KHkBH1V,AIbIgV,CFDDjC,MAAP,CDac,AIbA5T,CLcDoB,CEdGwS,AGAAwC,EJaEvW,GDCC6B,ECDL,AIhBL,CJiBD,AGbkB,CFDDsS,KFcZ,AEdb,CFc6BnT,MAA7B,wBIbE,kCHcM,6DAFM,CAAR;AAID,AFEJ,ACJD,AEdAsS,AECE,ACDEqD,AFFG,CJCN,GAAD,AIDa/B,CFaT,CDGAvQ,CEdGgQ,IDgBI,CChBX,CAAaR,CFcDtS,AIbN0U,ACDQ9V,EAAEsW,CDCd,CFDF,AECUT,EJaQnU,CEdMgS,KAAxB,GFcY,CAAgBxP,IIbFgH,CJa1B,AIbE,EAA2B2K,ODHA,SCGgBhB,ADHhCJ,CCGX,EAA8C,UDHnB,GAAM,ECGjC,EAAuD,CAAvD,EAA0D,IAAI7M,KAAKI,EAAnE;AHgBI,AFEN,AGlBAmL,AECE,ACNO,AFGPoB,GEHA,IHKKL,EHkBEhU,CEFCiB,EChBV,CAAayS,CECP8B,GHeW,CAAC9C,CAAD,AFEjB,AGlBA,CHkBoBzS,AIpBA,CFkBC+F,CAAJ,AChBQ0N,CHkBzB,AKjBE,CHesBf,CAAP,AFEQ,AIpBvB,CCGgBuC,CHeStC,CAAV,AChBjB,EDgB8B9S,CAAb,EAAgB+S,CAAhB,CAAX,AGfJ;AHgBI,AFEF,ACJJ,AEdAQ,AECE,ADHD,CAFM,GDIHS,IHkBItU,CGlBR,CDgBUuT,AChBAe,IECJ+B,CFDN,EAAiB/B,CECf,GHemB,CAAf,AChBN,OHkB6BjU,UAAzB,EAAqC;AEDnCiT,AFEE,ACJR,AIbC,ACDCgD,CDVF,UJwBS7R,EKdIsQ,CJgBC,CDFd,CAAcrQ,ECEIvE,EDFlB,EAAoBwE,CCEN,CACNsO,EIjBN,GLcF,ECGehN,ADHc,OCGrB,CAAe,KAAf,EAAsB,YAAW;AAAE,AFEnC,ACJN,AKdD,AFFD,CEPA,GFOM+O,IDEGvB,CFcF,IAAI7O,ECEuCnD,AFEnCpB,EGlBNoT,GDgB8CF,ADFrC5R,CGhBK8H,KJoBGhJ,GAAX,CEFmC,ADFtBS,CCEe,AFEZ,CAAhB,CAAP,CIpB4B4Q,EHgB7B,EAA6BjN,QGhBb,CAA0B4P,GHgBD/S,MAAMkD,GGhB/B,EAAwC8P,EHgBF,CAAP,GAAW9P,OAAO,AGhBjD,CHgB+B,AGhBtD,GHgB4E,CAA5B,CAAzC,EAAyEE,OAAO,CAArF,EAAwFA,OAAOF,IAA/F,EAAqGE,MAArG,EAA6G;ACE1C,AFGhE,ACJDD,AKdJ,AFFA,IEEMkS,AFFA9B,GFiBE,CADM,ACfGpB,CDeX,KCfWA,EFeH/O,EIbCiR,ECDO,CFFCtM,EHgBF,CAAjB,IAAsB9H,CKdpBoV,KFF8BjF,IHgBAhN,IAAV,AKdJ,CLclB,AKdmBxE,CAAD,EAAmB,AFFlB,CAA0BmU,YAA1B,EAAwCC,aAAxC,CAAvB;AFmBMpB,AFEF,ACJD,AKdD,AFFF0B,MEEM,CAACuB,CHFevC,GGEpB,CJgBU7Q,CIhBC,EFFEuK,CFkBT,AClBgBsG,GDkBH,WElBnB,CAA+BW,SFkBzB,KElBN;AFmBK,AFED,AMlBF,AFFFM,MEEQ+B,ENkBA,AGrBqB9C,CHqBpBlU,KMlBOuW,CFFD7I,EDDcwG,EGGR2C,QAAnB,GNkB4B3W,AIpB9B,CAA+B0U,cAA/B,CJoBS,IAAyC,CAAC5U,gBAA3C,KAAgEK,UAApE,EAAgF;AAC5EL,ACJN,AKdA,MAAMiX,EHJ6B3C,GFkB5B,GKdOiC,EHJqBjC,GGIhBwC,ILcA,IDIMzW,AMlBzB,UNkBM;AEDJiT,AFEI,ACJJ,AKdFiD,AFFK,IAAMrB,GEEN2B,CHLqCzC,EDqBlCZ,CDFD,EEnBmCY,EHuB7B/T,ACJF0E,AKdX,GAAgBzE,EAAEoW,CJgBhB,EDFiB/U,CCEG,CAApB,CAhBc,AFkBQlB,CEFC,AIhBzB,ENkBa,EAAgB,CAAhB,CAAP,ACJuBS,MAAtB,EAA8B8D,YAAYtD,CGhBjB,KHgBuBqD,IGhB5CmQ,CHgBsC,CAA1C,EAAwDjQ,QAAQ,CAArE,EAAwEA,GGhB1C,KHgBkDF,KAAhF,EAAuFE,OAAvF,EAAgG;ACGhG,AFEC,ACJCD,AKdJuR,AFHgC,OEG3BO,CHNyCzC,CCGmB,CFmBzDf,GCtBsCe,EDsB5C,AIhBF,GLccpP,AKdE3E,EAAEsW,GLcd,IAAmBjV,AKdvB,ULciCsD,KAAV,CAAnB;ACGH,AFEC,ACJC,AGjBHuG,OAAGwJ,CJqBG,cIrBYhH,eAAf,EAD8D;AFqBlE,AFEO,AMlBNsI,AFHAnB,CFPF,MEOKF,MEGQG,SFHOpH,OEGlB,CAA4BuI,KAAKM,EFH9B,MEGyB,GAAgBG,KAA5C,EAAmDT,KAAKO,QAAL,GAAgBG,KAAnE;ANmBM,ACJJvS,AKdH,AFNkE,CEFnE,EFEkC,QHoBzBzC,IDIMjC,CCJX,CAAW2E,OAAX,EAAoBxD,MDIQV,CCJDC,EDIhB,EAAsB,ACJb,CDIT,ACJqBmE,CDI5B,QCJgB,EAAuBL,MAAM9D,IAAN,CAAWsE,SAAX,CAAvB,CAApB;ACGJlF,AFEK,ACJF,AKdH,AFPkC,CAA3B,GEODoX,CNeF,ACPF,CDUI,CEFCnX,MFEKO,CEFZ,AFEM,EAAQ,CEFGyS,CIhBG,QJgBpB,CIhBMmE,WAAc,CAAC5W,CAAD,EAAmB;ANmB/B,ACJP,AKdC,MAAI,CAACiW,IAAL,CNkBU,CMlBC;ANmBD,AMlBVA,AFJK,IAAMnB,KEIJ,IAAP,qCFJ8B,SAAnBA,gBAAmB,CAACC,EAAD,EAAaC,EAAb,EAA4B;AJuBhD,ACJZ,AKdEgB,AFJAtB,aEIWF,IFJIzG,EJsBErO,KMlBjB,IFJA,CAA2BgV,OJsBOtU,IAAjB,CAAsB,GItBGiO,CJsBzB,EAA4BlO,GAA5B,EAAiC,CAAjC,CAAP,CItBiB,KAA+B4U,EAA1D;AJuBO,ACJT,AKdC,AFJCJ,CEAF,QNmBQ,CAGE,CCJD/P,MDIO5E,ACJhB,AGlBiB+N,CJsBP,ACJMlJ,EDIE,ICJlB,EAAwBC,EGlBtB,CAA2B6P,GHkB7B,EAAgC,UGlBYtG,WAAf,KAA+B2G,EAA1D;AJuBU,ACJV,AGlBD,CAHM,QHqBA,IAAIjQ,GAAT,IAAgBD,MAAhB,EAAwB;ADKd,ACJR,AKdJ,ULcQA,OAAOE,EDIItF,YCJX,CAAsBqF,GAAtB,CDI4B3E,ACJhC,EAAgC,EDIjB,CAAsB,IAAtB,EAA4BD,GAA5B,EAAiC,CAAjC,CAAP;AACH,ACJH0E,AKdNuO,AFJO,IAAM6B,KEIJ4B,MLcI9R,GAAP,IAAcD,GKdpB,CAA0B,AFJN,GHkBOC,GAAP,CAAd,EGlBOkQ,IEIb,AFJoB,CAACC,CEIoBgB,CFJrB,EAAgB,UEIpC,EAAwD,KAAxD;ANmBK,ACJA,AKdL,AFJE,MAAI3B,eAAJ,EAAqB;AJyBtB,ACNE,AKdHnB,AFJIsB,SEIKmC,UFJU9I,MEInB,CAA0B,IFJtB,CAA2BsG,QEI/B,EAAyCoC,IFJrC,SEIJ,EAAwD,KAAxD;ANqBA,ACNC,AKdD,AFJI9B,SJwBKtU,UIxBU0N,KJwBnB,CAAyBzN,KIxBrB,CJwBJ,AIxB+BgU,EJwBE,YIxB7B;AJyBA,AMpBJlB,AFJG,QJwBKzT,CMpBCkX,gBAAT,CAA0B,KNoBK5W,MMpB/B,EAAuC2W,INoBnC,EAAyC,KMpB7C,EAAoD,KAApD;ANqBQ,ACNR;ADOQ,ACNR,AKdA,AFJE3F,IEIE6F,KFJKhN,EHkBA7E,CKdG,CFJV,CAAYiQ,CJwBCjV,CMpBf,AFJE,EHkBF,CAAiBmE,IAAjB,EAAuB,GDMK9D,MAAb,CAAP;AACH,ACNH,AKdF,AFJC,CAPM,GEWDwJ,OLcG7F,AKdI,SAAP6F,ELcc1F,EKdP,ELcJ,CAAP,CKdgB;ANqBd,ACNH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","file":"scripts.7b8696cf.map","sourcesContent":["/*!\n * PEP v0.4.3 | https://github.com/jquery/PEP\n * Copyright jQuery Foundation and other contributors | http://jquery.org/license\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.PointerEventsPolyfill = factory());\n}(this, function () { 'use strict';\n\n  /**\n   * This is the constructor for new PointerEvents.\n   *\n   * New Pointer Events must be given a type, and an optional dictionary of\n   * initialization properties.\n   *\n   * Due to certain platform requirements, events returned from the constructor\n   * identify as MouseEvents.\n   *\n   * @constructor\n   * @param {String} inType The type of the event to create.\n   * @param {Object} [inDict] An optional dictionary of initial event properties.\n   * @return {Event} A new PointerEvent of type `inType`, initialized with properties from `inDict`.\n   */\n  var MOUSE_PROPS = [\n    'bubbles',\n    'cancelable',\n    'view',\n    'detail',\n    'screenX',\n    'screenY',\n    'clientX',\n    'clientY',\n    'ctrlKey',\n    'altKey',\n    'shiftKey',\n    'metaKey',\n    'button',\n    'relatedTarget',\n    'pageX',\n    'pageY'\n  ];\n\n  var MOUSE_DEFAULTS = [\n    false,\n    false,\n    null,\n    null,\n    0,\n    0,\n    0,\n    0,\n    false,\n    false,\n    false,\n    false,\n    0,\n    null,\n    0,\n    0\n  ];\n\n  function PointerEvent(inType, inDict) {\n    inDict = inDict || Object.create(null);\n\n    var e = document.createEvent('Event');\n    e.initEvent(inType, inDict.bubbles || false, inDict.cancelable || false);\n\n    // define inherited MouseEvent properties\n    // skip bubbles and cancelable since they're set above in initEvent()\n    for (var i = 2, p; i < MOUSE_PROPS.length; i++) {\n      p = MOUSE_PROPS[i];\n      e[p] = inDict[p] || MOUSE_DEFAULTS[i];\n    }\n    e.buttons = inDict.buttons || 0;\n\n    // Spec requires that pointers without pressure specified use 0.5 for down\n    // state and 0 for up state.\n    var pressure = 0;\n\n    if (inDict.pressure && e.buttons) {\n      pressure = inDict.pressure;\n    } else {\n      pressure = e.buttons ? 0.5 : 0;\n    }\n\n    // add x/y properties aliased to clientX/Y\n    e.x = e.clientX;\n    e.y = e.clientY;\n\n    // define the properties of the PointerEvent interface\n    e.pointerId = inDict.pointerId || 0;\n    e.width = inDict.width || 0;\n    e.height = inDict.height || 0;\n    e.pressure = pressure;\n    e.tiltX = inDict.tiltX || 0;\n    e.tiltY = inDict.tiltY || 0;\n    e.twist = inDict.twist || 0;\n    e.tangentialPressure = inDict.tangentialPressure || 0;\n    e.pointerType = inDict.pointerType || '';\n    e.hwTimestamp = inDict.hwTimestamp || 0;\n    e.isPrimary = inDict.isPrimary || false;\n    return e;\n  }\n\n  /**\n   * This module implements a map of pointer states\n   */\n  var USE_MAP = window.Map && window.Map.prototype.forEach;\n  var PointerMap = USE_MAP ? Map : SparseArrayMap;\n\n  function SparseArrayMap() {\n    this.array = [];\n    this.size = 0;\n  }\n\n  SparseArrayMap.prototype = {\n    set: function(k, v) {\n      if (v === undefined) {\n        return this.delete(k);\n      }\n      if (!this.has(k)) {\n        this.size++;\n      }\n      this.array[k] = v;\n    },\n    has: function(k) {\n      return this.array[k] !== undefined;\n    },\n    delete: function(k) {\n      if (this.has(k)) {\n        delete this.array[k];\n        this.size--;\n      }\n    },\n    get: function(k) {\n      return this.array[k];\n    },\n    clear: function() {\n      this.array.length = 0;\n      this.size = 0;\n    },\n\n    // return value, key, map\n    forEach: function(callback, thisArg) {\n      return this.array.forEach(function(v, k) {\n        callback.call(thisArg, v, k, this);\n      }, this);\n    }\n  };\n\n  var CLONE_PROPS = [\n\n    // MouseEvent\n    'bubbles',\n    'cancelable',\n    'view',\n    'detail',\n    'screenX',\n    'screenY',\n    'clientX',\n    'clientY',\n    'ctrlKey',\n    'altKey',\n    'shiftKey',\n    'metaKey',\n    'button',\n    'relatedTarget',\n\n    // DOM Level 3\n    'buttons',\n\n    // PointerEvent\n    'pointerId',\n    'width',\n    'height',\n    'pressure',\n    'tiltX',\n    'tiltY',\n    'pointerType',\n    'hwTimestamp',\n    'isPrimary',\n\n    // event instance\n    'type',\n    'target',\n    'currentTarget',\n    'which',\n    'pageX',\n    'pageY',\n    'timeStamp'\n  ];\n\n  var CLONE_DEFAULTS = [\n\n    // MouseEvent\n    false,\n    false,\n    null,\n    null,\n    0,\n    0,\n    0,\n    0,\n    false,\n    false,\n    false,\n    false,\n    0,\n    null,\n\n    // DOM Level 3\n    0,\n\n    // PointerEvent\n    0,\n    0,\n    0,\n    0,\n    0,\n    0,\n    '',\n    0,\n    false,\n\n    // event instance\n    '',\n    null,\n    null,\n    0,\n    0,\n    0,\n    0\n  ];\n\n  var BOUNDARY_EVENTS = {\n    'pointerover': 1,\n    'pointerout': 1,\n    'pointerenter': 1,\n    'pointerleave': 1\n  };\n\n  var HAS_SVG_INSTANCE = (typeof SVGElementInstance !== 'undefined');\n\n  /**\n   * This module is for normalizing events. Mouse and Touch events will be\n   * collected here, and fire PointerEvents that have the same semantics, no\n   * matter the source.\n   * Events fired:\n   *   - pointerdown: a pointing is added\n   *   - pointerup: a pointer is removed\n   *   - pointermove: a pointer is moved\n   *   - pointerover: a pointer crosses into an element\n   *   - pointerout: a pointer leaves an element\n   *   - pointercancel: a pointer will no longer generate events\n   */\n  var dispatcher = {\n    pointermap: new PointerMap(),\n    eventMap: Object.create(null),\n    captureInfo: Object.create(null),\n\n    // Scope objects for native events.\n    // This exists for ease of testing.\n    eventSources: Object.create(null),\n    eventSourceList: [],\n    /**\n     * Add a new event source that will generate pointer events.\n     *\n     * `inSource` must contain an array of event names named `events`, and\n     * functions with the names specified in the `events` array.\n     * @param {string} name A name for the event source\n     * @param {Object} source A new source of platform events.\n     */\n    registerSource: function(name, source) {\n      var s = source;\n      var newEvents = s.events;\n      if (newEvents) {\n        newEvents.forEach(function(e) {\n          if (s[e]) {\n            this.eventMap[e] = s[e].bind(s);\n          }\n        }, this);\n        this.eventSources[name] = s;\n        this.eventSourceList.push(s);\n      }\n    },\n    register: function(element) {\n      var l = this.eventSourceList.length;\n      for (var i = 0, es; (i < l) && (es = this.eventSourceList[i]); i++) {\n\n        // call eventsource register\n        es.register.call(es, element);\n      }\n    },\n    unregister: function(element) {\n      var l = this.eventSourceList.length;\n      for (var i = 0, es; (i < l) && (es = this.eventSourceList[i]); i++) {\n\n        // call eventsource register\n        es.unregister.call(es, element);\n      }\n    },\n    contains: /*scope.external.contains || */function(container, contained) {\n      try {\n        return container.contains(contained);\n      } catch (ex) {\n\n        // most likely: https://bugzilla.mozilla.org/show_bug.cgi?id=208427\n        return false;\n      }\n    },\n\n    // EVENTS\n    down: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerdown', inEvent);\n    },\n    move: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointermove', inEvent);\n    },\n    up: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerup', inEvent);\n    },\n    enter: function(inEvent) {\n      inEvent.bubbles = false;\n      this.fireEvent('pointerenter', inEvent);\n    },\n    leave: function(inEvent) {\n      inEvent.bubbles = false;\n      this.fireEvent('pointerleave', inEvent);\n    },\n    over: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerover', inEvent);\n    },\n    out: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerout', inEvent);\n    },\n    cancel: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointercancel', inEvent);\n    },\n    leaveOut: function(event) {\n      this.out(event);\n      this.propagate(event, this.leave, false);\n    },\n    enterOver: function(event) {\n      this.over(event);\n      this.propagate(event, this.enter, true);\n    },\n\n    // LISTENER LOGIC\n    eventHandler: function(inEvent) {\n\n      // This is used to prevent multiple dispatch of pointerevents from\n      // platform events. This can happen when two elements in different scopes\n      // are set up to create pointer events, which is relevant to Shadow DOM.\n      if (inEvent._handledByPE) {\n        return;\n      }\n      var type = inEvent.type;\n      var fn = this.eventMap && this.eventMap[type];\n      if (fn) {\n        fn(inEvent);\n      }\n      inEvent._handledByPE = true;\n    },\n\n    // set up event listeners\n    listen: function(target, events) {\n      events.forEach(function(e) {\n        this.addEvent(target, e);\n      }, this);\n    },\n\n    // remove event listeners\n    unlisten: function(target, events) {\n      events.forEach(function(e) {\n        this.removeEvent(target, e);\n      }, this);\n    },\n    addEvent: /*scope.external.addEvent || */function(target, eventName) {\n      target.addEventListener(eventName, this.boundHandler);\n    },\n    removeEvent: /*scope.external.removeEvent || */function(target, eventName) {\n      target.removeEventListener(eventName, this.boundHandler);\n    },\n\n    // EVENT CREATION AND TRACKING\n    /**\n     * Creates a new Event of type `inType`, based on the information in\n     * `inEvent`.\n     *\n     * @param {string} inType A string representing the type of event to create\n     * @param {Event} inEvent A platform event with a target\n     * @return {Event} A PointerEvent of type `inType`\n     */\n    makeEvent: function(inType, inEvent) {\n\n      // relatedTarget must be null if pointer is captured\n      if (this.captureInfo[inEvent.pointerId]) {\n        inEvent.relatedTarget = null;\n      }\n      var e = new PointerEvent(inType, inEvent);\n      if (inEvent.preventDefault) {\n        e.preventDefault = inEvent.preventDefault;\n      }\n      e._target = e._target || inEvent.target;\n      return e;\n    },\n\n    // make and dispatch an event in one call\n    fireEvent: function(inType, inEvent) {\n      var e = this.makeEvent(inType, inEvent);\n      return this.dispatchEvent(e);\n    },\n    /**\n     * Returns a snapshot of inEvent, with writable properties.\n     *\n     * @param {Event} inEvent An event that contains properties to copy.\n     * @return {Object} An object containing shallow copies of `inEvent`'s\n     *    properties.\n     */\n    cloneEvent: function(inEvent) {\n      var eventCopy = Object.create(null);\n      var p;\n      for (var i = 0; i < CLONE_PROPS.length; i++) {\n        p = CLONE_PROPS[i];\n        eventCopy[p] = inEvent[p] || CLONE_DEFAULTS[i];\n\n        // Work around SVGInstanceElement shadow tree\n        // Return the <use> element that is represented by the instance for Safari, Chrome, IE.\n        // This is the behavior implemented by Firefox.\n        if (HAS_SVG_INSTANCE && (p === 'target' || p === 'relatedTarget')) {\n          if (eventCopy[p] instanceof SVGElementInstance) {\n            eventCopy[p] = eventCopy[p].correspondingUseElement;\n          }\n        }\n      }\n\n      // keep the semantics of preventDefault\n      if (inEvent.preventDefault) {\n        eventCopy.preventDefault = function() {\n          inEvent.preventDefault();\n        };\n      }\n      return eventCopy;\n    },\n    getTarget: function(inEvent) {\n      var capture = this.captureInfo[inEvent.pointerId];\n      if (!capture) {\n        return inEvent._target;\n      }\n      if (inEvent._target === capture || !(inEvent.type in BOUNDARY_EVENTS)) {\n        return capture;\n      }\n    },\n    propagate: function(event, fn, propagateDown) {\n      var target = event.target;\n      var targets = [];\n\n      // Order of conditions due to document.contains() missing in IE.\n      while (target !== document && !target.contains(event.relatedTarget)) {\n        targets.push(target);\n        target = target.parentNode;\n\n        // Touch: Do not propagate if node is detached.\n        if (!target) {\n          return;\n        }\n      }\n      if (propagateDown) {\n        targets.reverse();\n      }\n      targets.forEach(function(target) {\n        event.target = target;\n        fn.call(this, event);\n      }, this);\n    },\n    setCapture: function(inPointerId, inTarget, skipDispatch) {\n      if (this.captureInfo[inPointerId]) {\n        this.releaseCapture(inPointerId, skipDispatch);\n      }\n\n      this.captureInfo[inPointerId] = inTarget;\n      this.implicitRelease = this.releaseCapture.bind(this, inPointerId, skipDispatch);\n      document.addEventListener('pointerup', this.implicitRelease);\n      document.addEventListener('pointercancel', this.implicitRelease);\n\n      var e = new PointerEvent('gotpointercapture');\n      e.pointerId = inPointerId;\n      e._target = inTarget;\n\n      if (!skipDispatch) {\n        this.asyncDispatchEvent(e);\n      }\n    },\n    releaseCapture: function(inPointerId, skipDispatch) {\n      var t = this.captureInfo[inPointerId];\n      if (!t) {\n        return;\n      }\n\n      this.captureInfo[inPointerId] = undefined;\n      document.removeEventListener('pointerup', this.implicitRelease);\n      document.removeEventListener('pointercancel', this.implicitRelease);\n\n      var e = new PointerEvent('lostpointercapture');\n      e.pointerId = inPointerId;\n      e._target = t;\n\n      if (!skipDispatch) {\n        this.asyncDispatchEvent(e);\n      }\n    },\n    /**\n     * Dispatches the event to its target.\n     *\n     * @param {Event} inEvent The event to be dispatched.\n     * @return {Boolean} True if an event handler returns true, false otherwise.\n     */\n    dispatchEvent: /*scope.external.dispatchEvent || */function(inEvent) {\n      var t = this.getTarget(inEvent);\n      if (t) {\n        return t.dispatchEvent(inEvent);\n      }\n    },\n    asyncDispatchEvent: function(inEvent) {\n      requestAnimationFrame(this.dispatchEvent.bind(this, inEvent));\n    }\n  };\n  dispatcher.boundHandler = dispatcher.eventHandler.bind(dispatcher);\n\n  var targeting = {\n    shadow: function(inEl) {\n      if (inEl) {\n        return inEl.shadowRoot || inEl.webkitShadowRoot;\n      }\n    },\n    canTarget: function(shadow) {\n      return shadow && Boolean(shadow.elementFromPoint);\n    },\n    targetingShadow: function(inEl) {\n      var s = this.shadow(inEl);\n      if (this.canTarget(s)) {\n        return s;\n      }\n    },\n    olderShadow: function(shadow) {\n      var os = shadow.olderShadowRoot;\n      if (!os) {\n        var se = shadow.querySelector('shadow');\n        if (se) {\n          os = se.olderShadowRoot;\n        }\n      }\n      return os;\n    },\n    allShadows: function(element) {\n      var shadows = [];\n      var s = this.shadow(element);\n      while (s) {\n        shadows.push(s);\n        s = this.olderShadow(s);\n      }\n      return shadows;\n    },\n    searchRoot: function(inRoot, x, y) {\n      if (inRoot) {\n        var t = inRoot.elementFromPoint(x, y);\n        var st, sr;\n\n        // is element a shadow host?\n        sr = this.targetingShadow(t);\n        while (sr) {\n\n          // find the the element inside the shadow root\n          st = sr.elementFromPoint(x, y);\n          if (!st) {\n\n            // check for older shadows\n            sr = this.olderShadow(sr);\n          } else {\n\n            // shadowed element may contain a shadow root\n            var ssr = this.targetingShadow(st);\n            return this.searchRoot(ssr, x, y) || st;\n          }\n        }\n\n        // light dom element is the target\n        return t;\n      }\n    },\n    owner: function(element) {\n      var s = element;\n\n      // walk up until you hit the shadow root or document\n      while (s.parentNode) {\n        s = s.parentNode;\n      }\n\n      // the owner element is expected to be a Document or ShadowRoot\n      if (s.nodeType !== Node.DOCUMENT_NODE && s.nodeType !== Node.DOCUMENT_FRAGMENT_NODE) {\n        s = document;\n      }\n      return s;\n    },\n    findTarget: function(inEvent) {\n      var x = inEvent.clientX;\n      var y = inEvent.clientY;\n\n      // if the listener is in the shadow root, it is much faster to start there\n      var s = this.owner(inEvent.target);\n\n      // if x, y is not in this root, fall back to document search\n      if (!s.elementFromPoint(x, y)) {\n        s = document;\n      }\n      return this.searchRoot(s, x, y);\n    }\n  };\n\n  var forEach = Array.prototype.forEach.call.bind(Array.prototype.forEach);\n  var map = Array.prototype.map.call.bind(Array.prototype.map);\n  var toArray = Array.prototype.slice.call.bind(Array.prototype.slice);\n  var filter = Array.prototype.filter.call.bind(Array.prototype.filter);\n  var MO = window.MutationObserver || window.WebKitMutationObserver;\n  var SELECTOR = '[touch-action]';\n  var OBSERVER_INIT = {\n    subtree: true,\n    childList: true,\n    attributes: true,\n    attributeOldValue: true,\n    attributeFilter: ['touch-action']\n  };\n\n  function Installer(add, remove, changed, binder) {\n    this.addCallback = add.bind(binder);\n    this.removeCallback = remove.bind(binder);\n    this.changedCallback = changed.bind(binder);\n    if (MO) {\n      this.observer = new MO(this.mutationWatcher.bind(this));\n    }\n  }\n\n  Installer.prototype = {\n    watchSubtree: function(target) {\n\n      // Only watch scopes that can target find, as these are top-level.\n      // Otherwise we can see duplicate additions and removals that add noise.\n      //\n      // TODO(dfreedman): For some instances with ShadowDOMPolyfill, we can see\n      // a removal without an insertion when a node is redistributed among\n      // shadows. Since it all ends up correct in the document, watching only\n      // the document will yield the correct mutations to watch.\n      if (this.observer && targeting.canTarget(target)) {\n        this.observer.observe(target, OBSERVER_INIT);\n      }\n    },\n    enableOnSubtree: function(target) {\n      this.watchSubtree(target);\n      if (target === document && document.readyState !== 'complete') {\n        this.installOnLoad();\n      } else {\n        this.installNewSubtree(target);\n      }\n    },\n    installNewSubtree: function(target) {\n      forEach(this.findElements(target), this.addElement, this);\n    },\n    findElements: function(target) {\n      if (target.querySelectorAll) {\n        return target.querySelectorAll(SELECTOR);\n      }\n      return [];\n    },\n    removeElement: function(el) {\n      this.removeCallback(el);\n    },\n    addElement: function(el) {\n      this.addCallback(el);\n    },\n    elementChanged: function(el, oldValue) {\n      this.changedCallback(el, oldValue);\n    },\n    concatLists: function(accum, list) {\n      return accum.concat(toArray(list));\n    },\n\n    // register all touch-action = none nodes on document load\n    installOnLoad: function() {\n      document.addEventListener('readystatechange', function() {\n        if (document.readyState === 'complete') {\n          this.installNewSubtree(document);\n        }\n      }.bind(this));\n    },\n    isElement: function(n) {\n      return n.nodeType === Node.ELEMENT_NODE;\n    },\n    flattenMutationTree: function(inNodes) {\n\n      // find children with touch-action\n      var tree = map(inNodes, this.findElements, this);\n\n      // make sure the added nodes are accounted for\n      tree.push(filter(inNodes, this.isElement));\n\n      // flatten the list\n      return tree.reduce(this.concatLists, []);\n    },\n    mutationWatcher: function(mutations) {\n      mutations.forEach(this.mutationHandler, this);\n    },\n    mutationHandler: function(m) {\n      if (m.type === 'childList') {\n        var added = this.flattenMutationTree(m.addedNodes);\n        added.forEach(this.addElement, this);\n        var removed = this.flattenMutationTree(m.removedNodes);\n        removed.forEach(this.removeElement, this);\n      } else if (m.type === 'attributes') {\n        this.elementChanged(m.target, m.oldValue);\n      }\n    }\n  };\n\n  function shadowSelector(v) {\n    return 'body /shadow-deep/ ' + selector(v);\n  }\n  function selector(v) {\n    return '[touch-action=\"' + v + '\"]';\n  }\n  function rule(v) {\n    return '{ -ms-touch-action: ' + v + '; touch-action: ' + v + '; }';\n  }\n  var attrib2css = [\n    'none',\n    'auto',\n    'pan-x',\n    'pan-y',\n    {\n      rule: 'pan-x pan-y',\n      selectors: [\n        'pan-x pan-y',\n        'pan-y pan-x'\n      ]\n    }\n  ];\n  var styles = '';\n\n  // only install stylesheet if the browser has touch action support\n  var hasNativePE = window.PointerEvent || window.MSPointerEvent;\n\n  // only add shadow selectors if shadowdom is supported\n  var hasShadowRoot = !window.ShadowDOMPolyfill && document.head.createShadowRoot;\n\n  function applyAttributeStyles() {\n    if (hasNativePE) {\n      attrib2css.forEach(function(r) {\n        if (String(r) === r) {\n          styles += selector(r) + rule(r) + '\\n';\n          if (hasShadowRoot) {\n            styles += shadowSelector(r) + rule(r) + '\\n';\n          }\n        } else {\n          styles += r.selectors.map(selector) + rule(r.rule) + '\\n';\n          if (hasShadowRoot) {\n            styles += r.selectors.map(shadowSelector) + rule(r.rule) + '\\n';\n          }\n        }\n      });\n\n      var el = document.createElement('style');\n      el.textContent = styles;\n      document.head.appendChild(el);\n    }\n  }\n\n  var pointermap = dispatcher.pointermap;\n\n  // radius around touchend that swallows mouse events\n  var DEDUP_DIST = 25;\n\n  // left, middle, right, back, forward\n  var BUTTON_TO_BUTTONS = [1, 4, 2, 8, 16];\n\n  var HAS_BUTTONS = false;\n  try {\n    HAS_BUTTONS = new MouseEvent('test', { buttons: 1 }).buttons === 1;\n  } catch (e) {}\n\n  // handler block for native mouse events\n  var mouseEvents = {\n    POINTER_ID: 1,\n    POINTER_TYPE: 'mouse',\n    events: [\n      'mousedown',\n      'mousemove',\n      'mouseup',\n      'mouseover',\n      'mouseout'\n    ],\n    register: function(target) {\n      dispatcher.listen(target, this.events);\n    },\n    unregister: function(target) {\n      dispatcher.unlisten(target, this.events);\n    },\n    lastTouches: [],\n\n    // collide with the global mouse listener\n    isEventSimulatedFromTouch: function(inEvent) {\n      var lts = this.lastTouches;\n      var x = inEvent.clientX;\n      var y = inEvent.clientY;\n      for (var i = 0, l = lts.length, t; i < l && (t = lts[i]); i++) {\n\n        // simulated mouse events will be swallowed near a primary touchend\n        var dx = Math.abs(x - t.x);\n        var dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DIST && dy <= DEDUP_DIST) {\n          return true;\n        }\n      }\n    },\n    prepareEvent: function(inEvent) {\n      var e = dispatcher.cloneEvent(inEvent);\n\n      // forward mouse preventDefault\n      var pd = e.preventDefault;\n      e.preventDefault = function() {\n        inEvent.preventDefault();\n        pd();\n      };\n      e.pointerId = this.POINTER_ID;\n      e.isPrimary = true;\n      e.pointerType = this.POINTER_TYPE;\n      return e;\n    },\n    prepareButtonsForMove: function(e, inEvent) {\n      var p = pointermap.get(this.POINTER_ID);\n\n      // Update buttons state after possible out-of-document mouseup.\n      if (inEvent.which === 0 || !p) {\n        e.buttons = 0;\n      } else {\n        e.buttons = p.buttons;\n      }\n      inEvent.buttons = e.buttons;\n    },\n    mousedown: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var p = pointermap.get(this.POINTER_ID);\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) {\n          e.buttons = BUTTON_TO_BUTTONS[e.button];\n          if (p) { e.buttons |= p.buttons; }\n          inEvent.buttons = e.buttons;\n        }\n        pointermap.set(this.POINTER_ID, inEvent);\n        if (!p || p.buttons === 0) {\n          dispatcher.down(e);\n        } else {\n          dispatcher.move(e);\n        }\n      }\n    },\n    mousemove: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        pointermap.set(this.POINTER_ID, inEvent);\n        dispatcher.move(e);\n      }\n    },\n    mouseup: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var p = pointermap.get(this.POINTER_ID);\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) {\n          var up = BUTTON_TO_BUTTONS[e.button];\n\n          // Produces wrong state of buttons in Browsers without `buttons` support\n          // when a mouse button that was pressed outside the document is released\n          // inside and other buttons are still pressed down.\n          e.buttons = p ? p.buttons & ~up : 0;\n          inEvent.buttons = e.buttons;\n        }\n        pointermap.set(this.POINTER_ID, inEvent);\n\n        // Support: Firefox <=44 only\n        // FF Ubuntu includes the lifted button in the `buttons` property on\n        // mouseup.\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=1223366\n        e.buttons &= ~BUTTON_TO_BUTTONS[e.button];\n        if (e.buttons === 0) {\n          dispatcher.up(e);\n        } else {\n          dispatcher.move(e);\n        }\n      }\n    },\n    mouseover: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        pointermap.set(this.POINTER_ID, inEvent);\n        dispatcher.enterOver(e);\n      }\n    },\n    mouseout: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        dispatcher.leaveOut(e);\n      }\n    },\n    cancel: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.cancel(e);\n      this.deactivateMouse();\n    },\n    deactivateMouse: function() {\n      pointermap.delete(this.POINTER_ID);\n    }\n  };\n\n  var captureInfo = dispatcher.captureInfo;\n  var findTarget = targeting.findTarget.bind(targeting);\n  var allShadows = targeting.allShadows.bind(targeting);\n  var pointermap$1 = dispatcher.pointermap;\n\n  // This should be long enough to ignore compat mouse events made by touch\n  var DEDUP_TIMEOUT = 2500;\n  var CLICK_COUNT_TIMEOUT = 200;\n  var ATTRIB = 'touch-action';\n  var INSTALLER;\n\n  // handler block for native touch events\n  var touchEvents = {\n    events: [\n      'touchstart',\n      'touchmove',\n      'touchend',\n      'touchcancel'\n    ],\n    register: function(target) {\n      INSTALLER.enableOnSubtree(target);\n    },\n    unregister: function() {\n\n      // TODO(dfreedman): is it worth it to disconnect the MO?\n    },\n    elementAdded: function(el) {\n      var a = el.getAttribute(ATTRIB);\n      var st = this.touchActionToScrollType(a);\n      if (st) {\n        el._scrollType = st;\n        dispatcher.listen(el, this.events);\n\n        // set touch-action on shadows as well\n        allShadows(el).forEach(function(s) {\n          s._scrollType = st;\n          dispatcher.listen(s, this.events);\n        }, this);\n      }\n    },\n    elementRemoved: function(el) {\n      el._scrollType = undefined;\n      dispatcher.unlisten(el, this.events);\n\n      // remove touch-action from shadow\n      allShadows(el).forEach(function(s) {\n        s._scrollType = undefined;\n        dispatcher.unlisten(s, this.events);\n      }, this);\n    },\n    elementChanged: function(el, oldValue) {\n      var a = el.getAttribute(ATTRIB);\n      var st = this.touchActionToScrollType(a);\n      var oldSt = this.touchActionToScrollType(oldValue);\n\n      // simply update scrollType if listeners are already established\n      if (st && oldSt) {\n        el._scrollType = st;\n        allShadows(el).forEach(function(s) {\n          s._scrollType = st;\n        }, this);\n      } else if (oldSt) {\n        this.elementRemoved(el);\n      } else if (st) {\n        this.elementAdded(el);\n      }\n    },\n    scrollTypes: {\n      EMITTER: 'none',\n      XSCROLLER: 'pan-x',\n      YSCROLLER: 'pan-y',\n      SCROLLER: /^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/\n    },\n    touchActionToScrollType: function(touchAction) {\n      var t = touchAction;\n      var st = this.scrollTypes;\n      if (t === 'none') {\n        return 'none';\n      } else if (t === st.XSCROLLER) {\n        return 'X';\n      } else if (t === st.YSCROLLER) {\n        return 'Y';\n      } else if (st.SCROLLER.exec(t)) {\n        return 'XY';\n      }\n    },\n    POINTER_TYPE: 'touch',\n    firstTouch: null,\n    isPrimaryTouch: function(inTouch) {\n      return this.firstTouch === inTouch.identifier;\n    },\n    setPrimaryTouch: function(inTouch) {\n\n      // set primary touch if there no pointers, or the only pointer is the mouse\n      if (pointermap$1.size === 0 || (pointermap$1.size === 1 && pointermap$1.has(1))) {\n        this.firstTouch = inTouch.identifier;\n        this.firstXY = { X: inTouch.clientX, Y: inTouch.clientY };\n        this.scrolling = false;\n        this.cancelResetClickCount();\n      }\n    },\n    removePrimaryPointer: function(inPointer) {\n      if (inPointer.isPrimary) {\n        this.firstTouch = null;\n        this.firstXY = null;\n        this.resetClickCount();\n      }\n    },\n    clickCount: 0,\n    resetId: null,\n    resetClickCount: function() {\n      var fn = function() {\n        this.clickCount = 0;\n        this.resetId = null;\n      }.bind(this);\n      this.resetId = setTimeout(fn, CLICK_COUNT_TIMEOUT);\n    },\n    cancelResetClickCount: function() {\n      if (this.resetId) {\n        clearTimeout(this.resetId);\n      }\n    },\n    typeToButtons: function(type) {\n      var ret = 0;\n      if (type === 'touchstart' || type === 'touchmove') {\n        ret = 1;\n      }\n      return ret;\n    },\n    touchToPointer: function(inTouch) {\n      var cte = this.currentTouchEvent;\n      var e = dispatcher.cloneEvent(inTouch);\n\n      // We reserve pointerId 1 for Mouse.\n      // Touch identifiers can start at 0.\n      // Add 2 to the touch identifier for compatibility.\n      var id = e.pointerId = inTouch.identifier + 2;\n      e.target = captureInfo[id] || findTarget(e);\n      e.bubbles = true;\n      e.cancelable = true;\n      e.detail = this.clickCount;\n      e.button = 0;\n      e.buttons = this.typeToButtons(cte.type);\n      e.width = (inTouch.radiusX || inTouch.webkitRadiusX || 0) * 2;\n      e.height = (inTouch.radiusY || inTouch.webkitRadiusY || 0) * 2;\n      e.pressure = inTouch.force || inTouch.webkitForce || 0.5;\n      e.isPrimary = this.isPrimaryTouch(inTouch);\n      e.pointerType = this.POINTER_TYPE;\n\n      // forward modifier keys\n      e.altKey = cte.altKey;\n      e.ctrlKey = cte.ctrlKey;\n      e.metaKey = cte.metaKey;\n      e.shiftKey = cte.shiftKey;\n\n      // forward touch preventDefaults\n      var self = this;\n      e.preventDefault = function() {\n        self.scrolling = false;\n        self.firstXY = null;\n        cte.preventDefault();\n      };\n      return e;\n    },\n    processTouches: function(inEvent, inFunction) {\n      var tl = inEvent.changedTouches;\n      this.currentTouchEvent = inEvent;\n      for (var i = 0, t; i < tl.length; i++) {\n        t = tl[i];\n        inFunction.call(this, this.touchToPointer(t));\n      }\n    },\n\n    // For single axis scrollers, determines whether the element should emit\n    // pointer events or behave as a scroller\n    shouldScroll: function(inEvent) {\n      if (this.firstXY) {\n        var ret;\n        var scrollAxis = inEvent.currentTarget._scrollType;\n        if (scrollAxis === 'none') {\n\n          // this element is a touch-action: none, should never scroll\n          ret = false;\n        } else if (scrollAxis === 'XY') {\n\n          // this element should always scroll\n          ret = true;\n        } else {\n          var t = inEvent.changedTouches[0];\n\n          // check the intended scroll axis, and other axis\n          var a = scrollAxis;\n          var oa = scrollAxis === 'Y' ? 'X' : 'Y';\n          var da = Math.abs(t['client' + a] - this.firstXY[a]);\n          var doa = Math.abs(t['client' + oa] - this.firstXY[oa]);\n\n          // if delta in the scroll axis > delta other axis, scroll instead of\n          // making events\n          ret = da >= doa;\n        }\n        this.firstXY = null;\n        return ret;\n      }\n    },\n    findTouch: function(inTL, inId) {\n      for (var i = 0, l = inTL.length, t; i < l && (t = inTL[i]); i++) {\n        if (t.identifier === inId) {\n          return true;\n        }\n      }\n    },\n\n    // In some instances, a touchstart can happen without a touchend. This\n    // leaves the pointermap in a broken state.\n    // Therefore, on every touchstart, we remove the touches that did not fire a\n    // touchend event.\n    // To keep state globally consistent, we fire a\n    // pointercancel for this \"abandoned\" touch\n    vacuumTouches: function(inEvent) {\n      var tl = inEvent.touches;\n\n      // pointermap.size should be < tl.length here, as the touchstart has not\n      // been processed yet.\n      if (pointermap$1.size >= tl.length) {\n        var d = [];\n        pointermap$1.forEach(function(value, key) {\n\n          // Never remove pointerId == 1, which is mouse.\n          // Touch identifiers are 2 smaller than their pointerId, which is the\n          // index in pointermap.\n          if (key !== 1 && !this.findTouch(tl, key - 2)) {\n            var p = value.out;\n            d.push(p);\n          }\n        }, this);\n        d.forEach(this.cancelOut, this);\n      }\n    },\n    touchstart: function(inEvent) {\n      this.vacuumTouches(inEvent);\n      this.setPrimaryTouch(inEvent.changedTouches[0]);\n      this.dedupSynthMouse(inEvent);\n      if (!this.scrolling) {\n        this.clickCount++;\n        this.processTouches(inEvent, this.overDown);\n      }\n    },\n    overDown: function(inPointer) {\n      pointermap$1.set(inPointer.pointerId, {\n        target: inPointer.target,\n        out: inPointer,\n        outTarget: inPointer.target\n      });\n      dispatcher.enterOver(inPointer);\n      dispatcher.down(inPointer);\n    },\n    touchmove: function(inEvent) {\n      if (!this.scrolling) {\n        if (this.shouldScroll(inEvent)) {\n          this.scrolling = true;\n          this.touchcancel(inEvent);\n        } else {\n          inEvent.preventDefault();\n          this.processTouches(inEvent, this.moveOverOut);\n        }\n      }\n    },\n    moveOverOut: function(inPointer) {\n      var event = inPointer;\n      var pointer = pointermap$1.get(event.pointerId);\n\n      // a finger drifted off the screen, ignore it\n      if (!pointer) {\n        return;\n      }\n      var outEvent = pointer.out;\n      var outTarget = pointer.outTarget;\n      dispatcher.move(event);\n      if (outEvent && outTarget !== event.target) {\n        outEvent.relatedTarget = event.target;\n        event.relatedTarget = outTarget;\n\n        // recover from retargeting by shadow\n        outEvent.target = outTarget;\n        if (event.target) {\n          dispatcher.leaveOut(outEvent);\n          dispatcher.enterOver(event);\n        } else {\n\n          // clean up case when finger leaves the screen\n          event.target = outTarget;\n          event.relatedTarget = null;\n          this.cancelOut(event);\n        }\n      }\n      pointer.out = event;\n      pointer.outTarget = event.target;\n    },\n    touchend: function(inEvent) {\n      this.dedupSynthMouse(inEvent);\n      this.processTouches(inEvent, this.upOut);\n    },\n    upOut: function(inPointer) {\n      if (!this.scrolling) {\n        dispatcher.up(inPointer);\n        dispatcher.leaveOut(inPointer);\n      }\n      this.cleanUpPointer(inPointer);\n    },\n    touchcancel: function(inEvent) {\n      this.processTouches(inEvent, this.cancelOut);\n    },\n    cancelOut: function(inPointer) {\n      dispatcher.cancel(inPointer);\n      dispatcher.leaveOut(inPointer);\n      this.cleanUpPointer(inPointer);\n    },\n    cleanUpPointer: function(inPointer) {\n      pointermap$1.delete(inPointer.pointerId);\n      this.removePrimaryPointer(inPointer);\n    },\n\n    // prevent synth mouse events from creating pointer events\n    dedupSynthMouse: function(inEvent) {\n      var lts = mouseEvents.lastTouches;\n      var t = inEvent.changedTouches[0];\n\n      // only the primary finger will synth mouse events\n      if (this.isPrimaryTouch(t)) {\n\n        // remember x/y of last touch\n        var lt = { x: t.clientX, y: t.clientY };\n        lts.push(lt);\n        var fn = (function(lts, lt) {\n          var i = lts.indexOf(lt);\n          if (i > -1) {\n            lts.splice(i, 1);\n          }\n        }).bind(null, lts, lt);\n        setTimeout(fn, DEDUP_TIMEOUT);\n      }\n    }\n  };\n\n  INSTALLER = new Installer(touchEvents.elementAdded, touchEvents.elementRemoved,\n    touchEvents.elementChanged, touchEvents);\n\n  var pointermap$2 = dispatcher.pointermap;\n  var HAS_BITMAP_TYPE = window.MSPointerEvent &&\n    typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE === 'number';\n  var msEvents = {\n    events: [\n      'MSPointerDown',\n      'MSPointerMove',\n      'MSPointerUp',\n      'MSPointerOut',\n      'MSPointerOver',\n      'MSPointerCancel',\n      'MSGotPointerCapture',\n      'MSLostPointerCapture'\n    ],\n    register: function(target) {\n      dispatcher.listen(target, this.events);\n    },\n    unregister: function(target) {\n      dispatcher.unlisten(target, this.events);\n    },\n    POINTER_TYPES: [\n      '',\n      'unavailable',\n      'touch',\n      'pen',\n      'mouse'\n    ],\n    prepareEvent: function(inEvent) {\n      var e = inEvent;\n      if (HAS_BITMAP_TYPE) {\n        e = dispatcher.cloneEvent(inEvent);\n        e.pointerType = this.POINTER_TYPES[inEvent.pointerType];\n      }\n      return e;\n    },\n    cleanup: function(id) {\n      pointermap$2.delete(id);\n    },\n    MSPointerDown: function(inEvent) {\n      pointermap$2.set(inEvent.pointerId, inEvent);\n      var e = this.prepareEvent(inEvent);\n      dispatcher.down(e);\n    },\n    MSPointerMove: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.move(e);\n    },\n    MSPointerUp: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.up(e);\n      this.cleanup(inEvent.pointerId);\n    },\n    MSPointerOut: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.leaveOut(e);\n    },\n    MSPointerOver: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.enterOver(e);\n    },\n    MSPointerCancel: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.cancel(e);\n      this.cleanup(inEvent.pointerId);\n    },\n    MSLostPointerCapture: function(inEvent) {\n      var e = dispatcher.makeEvent('lostpointercapture', inEvent);\n      dispatcher.dispatchEvent(e);\n    },\n    MSGotPointerCapture: function(inEvent) {\n      var e = dispatcher.makeEvent('gotpointercapture', inEvent);\n      dispatcher.dispatchEvent(e);\n    }\n  };\n\n  function applyPolyfill() {\n\n    // only activate if this platform does not have pointer events\n    if (!window.PointerEvent) {\n      window.PointerEvent = PointerEvent;\n\n      if (window.navigator.msPointerEnabled) {\n        var tp = window.navigator.msMaxTouchPoints;\n        Object.defineProperty(window.navigator, 'maxTouchPoints', {\n          value: tp,\n          enumerable: true\n        });\n        dispatcher.registerSource('ms', msEvents);\n      } else {\n        Object.defineProperty(window.navigator, 'maxTouchPoints', {\n          value: 0,\n          enumerable: true\n        });\n        dispatcher.registerSource('mouse', mouseEvents);\n        if (window.ontouchstart !== undefined) {\n          dispatcher.registerSource('touch', touchEvents);\n        }\n      }\n\n      dispatcher.register(document);\n    }\n  }\n\n  var n = window.navigator;\n  var s;\n  var r;\n  var h;\n  function assertActive(id) {\n    if (!dispatcher.pointermap.has(id)) {\n      var error = new Error('InvalidPointerId');\n      error.name = 'InvalidPointerId';\n      throw error;\n    }\n  }\n  function assertConnected(elem) {\n    var parent = elem.parentNode;\n    while (parent && parent !== elem.ownerDocument) {\n      parent = parent.parentNode;\n    }\n    if (!parent) {\n      var error = new Error('InvalidStateError');\n      error.name = 'InvalidStateError';\n      throw error;\n    }\n  }\n  function inActiveButtonState(id) {\n    var p = dispatcher.pointermap.get(id);\n    return p.buttons !== 0;\n  }\n  if (n.msPointerEnabled) {\n    s = function(pointerId) {\n      assertActive(pointerId);\n      assertConnected(this);\n      if (inActiveButtonState(pointerId)) {\n        dispatcher.setCapture(pointerId, this, true);\n        this.msSetPointerCapture(pointerId);\n      }\n    };\n    r = function(pointerId) {\n      assertActive(pointerId);\n      dispatcher.releaseCapture(pointerId, true);\n      this.msReleasePointerCapture(pointerId);\n    };\n  } else {\n    s = function setPointerCapture(pointerId) {\n      assertActive(pointerId);\n      assertConnected(this);\n      if (inActiveButtonState(pointerId)) {\n        dispatcher.setCapture(pointerId, this);\n      }\n    };\n    r = function releasePointerCapture(pointerId) {\n      assertActive(pointerId);\n      dispatcher.releaseCapture(pointerId);\n    };\n  }\n  h = function hasPointerCapture(pointerId) {\n    return !!dispatcher.captureInfo[pointerId];\n  };\n\n  function applyPolyfill$1() {\n    if (window.Element && !Element.prototype.setPointerCapture) {\n      Object.defineProperties(Element.prototype, {\n        'setPointerCapture': {\n          value: s\n        },\n        'releasePointerCapture': {\n          value: r\n        },\n        'hasPointerCapture': {\n          value: h\n        }\n      });\n    }\n  }\n\n  applyAttributeStyles();\n  applyPolyfill();\n  applyPolyfill$1();\n\n  var pointerevents = {\n    dispatcher: dispatcher,\n    Installer: Installer,\n    PointerEvent: PointerEvent,\n    PointerMap: PointerMap,\n    targetFinding: targeting\n  };\n\n  return pointerevents;\n\n}));","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/**\n *  Copyright (c) 2013, Facebook, Inc.\n *  All rights reserved.\n *\n *  This source code is licensed under the BSD-style license found in the\n *  LICENSE file in the root directory of this source tree. An additional grant\n *  of patent rights can be found in the PATENTS file in the same directory.\n */\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.rebound = factory());\n}(this, (function () { 'use strict';\n\nvar _onFrame = void 0;\nif (typeof window !== 'undefined') {\n  _onFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame;\n}\n\nif (!_onFrame && typeof process !== 'undefined' && process.title === 'node') {\n  _onFrame = setImmediate;\n}\n\n_onFrame = _onFrame || function (callback) {\n  window.setTimeout(callback, 1000 / 60);\n};\n\nvar _onFrame$1 = _onFrame;\n\n/* eslint-disable flowtype/no-weak-types */\n\nvar concat = Array.prototype.concat;\nvar slice = Array.prototype.slice;\n\n// Bind a function to a context object.\nfunction bind(func, context) {\n  for (var _len = arguments.length, outerArgs = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    outerArgs[_key - 2] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, innerArgs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      innerArgs[_key2] = arguments[_key2];\n    }\n\n    func.apply(context, concat.call(outerArgs, slice.call(innerArgs)));\n  };\n}\n\n// Add all the properties in the source to the target.\nfunction extend(target, source) {\n  for (var key in source) {\n    if (source.hasOwnProperty(key)) {\n      target[key] = source[key];\n    }\n  }\n}\n\n// Cross browser/node timer functions.\nfunction onFrame(func) {\n  return _onFrame$1(func);\n}\n\n// Lop off the first occurence of the reference in the Array.\nfunction removeFirst(array, item) {\n  var idx = array.indexOf(item);\n  idx !== -1 && array.splice(idx, 1);\n}\n\nvar colorCache = {};\n/**\n * Converts a hex-formatted color string to its rgb-formatted equivalent. Handy\n * when performing color tweening animations\n * @public\n * @param colorString A hex-formatted color string\n * @return An rgb-formatted color string\n */\nfunction hexToRGB(colorString) {\n  if (colorCache[colorString]) {\n    return colorCache[colorString];\n  }\n  var normalizedColor = colorString.replace('#', '');\n  if (normalizedColor.length === 3) {\n    normalizedColor = normalizedColor[0] + normalizedColor[0] + normalizedColor[1] + normalizedColor[1] + normalizedColor[2] + normalizedColor[2];\n  }\n  var parts = normalizedColor.match(/.{2}/g);\n  if (!parts || parts.length < 3) {\n    throw new Error('Expected a color string of format #rrggbb');\n  }\n\n  var ret = {\n    r: parseInt(parts[0], 16),\n    g: parseInt(parts[1], 16),\n    b: parseInt(parts[2], 16)\n  };\n\n  colorCache[colorString] = ret;\n  return ret;\n}\n\n/**\n * Converts a rgb-formatted color string to its hex-formatted equivalent. Handy\n * when performing color tweening animations\n * @public\n * @param colorString An rgb-formatted color string\n * @return A hex-formatted color string\n */\nfunction rgbToHex(rNum, gNum, bNum) {\n  var r = rNum.toString(16);\n  var g = gNum.toString(16);\n  var b = bNum.toString(16);\n  r = r.length < 2 ? '0' + r : r;\n  g = g.length < 2 ? '0' + g : g;\n  b = b.length < 2 ? '0' + b : b;\n  return '#' + r + g + b;\n}\n\nvar util = Object.freeze({\n\tbind: bind,\n\textend: extend,\n\tonFrame: onFrame,\n\tremoveFirst: removeFirst,\n\thexToRGB: hexToRGB,\n\trgbToHex: rgbToHex\n});\n\n/**\n * This helper function does a linear interpolation of a value from\n * one range to another. This can be very useful for converting the\n * motion of a Spring to a range of UI property values. For example a\n * spring moving from position 0 to 1 could be interpolated to move a\n * view from pixel 300 to 350 and scale it from 0.5 to 1. The current\n * position of the `Spring` just needs to be run through this method\n * taking its input range in the _from_ parameters with the property\n * animation range in the _to_ parameters.\n * @public\n */\nfunction mapValueInRange(value, fromLow, fromHigh, toLow, toHigh) {\n  var fromRangeSize = fromHigh - fromLow;\n  var toRangeSize = toHigh - toLow;\n  var valueScale = (value - fromLow) / fromRangeSize;\n  return toLow + valueScale * toRangeSize;\n}\n\n/**\n * Interpolate two hex colors in a 0 - 1 range or optionally provide a\n * custom range with fromLow,fromHight. The output will be in hex by default\n * unless asRGB is true in which case it will be returned as an rgb string.\n *\n * @public\n * @param asRGB Whether to return an rgb-style string\n * @return A string in hex color format unless asRGB is true, in which case a string in rgb format\n */\nfunction interpolateColor(val, startColorStr, endColorStr) {\n  var fromLow = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n  var fromHigh = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n  var asRGB = arguments[5];\n\n  var startColor = hexToRGB(startColorStr);\n  var endColor = hexToRGB(endColorStr);\n  var r = Math.floor(mapValueInRange(val, fromLow, fromHigh, startColor.r, endColor.r));\n  var g = Math.floor(mapValueInRange(val, fromLow, fromHigh, startColor.g, endColor.g));\n  var b = Math.floor(mapValueInRange(val, fromLow, fromHigh, startColor.b, endColor.b));\n  if (asRGB) {\n    return 'rgb(' + r + ',' + g + ',' + b + ')';\n  } else {\n    return rgbToHex(r, g, b);\n  }\n}\n\nfunction degreesToRadians(deg) {\n  return deg * Math.PI / 180;\n}\n\nfunction radiansToDegrees(rad) {\n  return rad * 180 / Math.PI;\n}\n\nvar MathUtil = Object.freeze({\n\tmapValueInRange: mapValueInRange,\n\tinterpolateColor: interpolateColor,\n\tdegreesToRadians: degreesToRadians,\n\tradiansToDegrees: radiansToDegrees\n});\n\n// Math for converting from\n// [Origami](http://facebook.github.io/origami/) to\n// [Rebound](http://facebook.github.io/rebound).\n// You mostly don't need to worry about this, just use\n// SpringConfig.fromOrigamiTensionAndFriction(v, v);\n\nfunction tensionFromOrigamiValue(oValue) {\n  return (oValue - 30.0) * 3.62 + 194.0;\n}\n\nfunction origamiValueFromTension(tension) {\n  return (tension - 194.0) / 3.62 + 30.0;\n}\n\nfunction frictionFromOrigamiValue(oValue) {\n  return (oValue - 8.0) * 3.0 + 25.0;\n}\n\nfunction origamiFromFriction(friction) {\n  return (friction - 25.0) / 3.0 + 8.0;\n}\n\nvar OrigamiValueConverter = Object.freeze({\n\ttensionFromOrigamiValue: tensionFromOrigamiValue,\n\torigamiValueFromTension: origamiValueFromTension,\n\tfrictionFromOrigamiValue: frictionFromOrigamiValue,\n\torigamiFromFriction: origamiFromFriction\n});\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n\n\n\n\n\n\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n/**\n * Plays each frame of the SpringSystem on animation\n * timing loop. This is the default type of looper for a new spring system\n * as it is the most common when developing UI.\n * @public\n */\n/**\n *  Copyright (c) 2013, Facebook, Inc.\n *  All rights reserved.\n *\n *  This source code is licensed under the BSD-style license found in the\n *  LICENSE file in the root directory of this source tree. An additional grant\n *  of patent rights can be found in the PATENTS file in the same directory.\n *\n * \n */\n\nvar AnimationLooper = function () {\n  function AnimationLooper() {\n    classCallCheck(this, AnimationLooper);\n    this.springSystem = null;\n  }\n\n  AnimationLooper.prototype.run = function run() {\n    var springSystem = getSpringSystem.call(this);\n\n    onFrame(function () {\n      springSystem.loop(Date.now());\n    });\n  };\n\n  return AnimationLooper;\n}();\n\n/**\n * Resolves the SpringSystem to a resting state in a\n * tight and blocking loop. This is useful for synchronously generating\n * pre-recorded animations that can then be played on a timing loop later.\n * Sometimes this lead to better performance to pre-record a single spring\n * curve and use it to drive many animations; however, it can make dynamic\n * response to user input a bit trickier to implement.\n * @public\n */\nvar SimulationLooper = function () {\n  function SimulationLooper(timestep) {\n    classCallCheck(this, SimulationLooper);\n    this.springSystem = null;\n    this.time = 0;\n    this.running = false;\n\n    this.timestep = timestep || 16.667;\n  }\n\n  SimulationLooper.prototype.run = function run() {\n    var springSystem = getSpringSystem.call(this);\n\n    if (this.running) {\n      return;\n    }\n    this.running = true;\n    while (!springSystem.getIsIdle()) {\n      springSystem.loop(this.time += this.timestep);\n    }\n    this.running = false;\n  };\n\n  return SimulationLooper;\n}();\n\n/**\n * Resolves the SpringSystem one step at a\n * time controlled by an outside loop. This is useful for testing and\n * verifying the behavior of a SpringSystem or if you want to control your own\n * timing loop for some reason e.g. slowing down or speeding up the\n * simulation.\n * @public\n */\nvar SteppingSimulationLooper = function () {\n  function SteppingSimulationLooper() {\n    classCallCheck(this, SteppingSimulationLooper);\n    this.springSystem = null;\n    this.time = 0;\n    this.running = false;\n  }\n\n  SteppingSimulationLooper.prototype.run = function run() {}\n  // this.run is NOOP'd here to allow control from the outside using\n  // this.step.\n\n\n  // Perform one step toward resolving the SpringSystem.\n  ;\n\n  SteppingSimulationLooper.prototype.step = function step(timestep) {\n    var springSystem = getSpringSystem.call(this);\n    springSystem.loop(this.time += timestep);\n  };\n\n  return SteppingSimulationLooper;\n}();\n\nfunction getSpringSystem() {\n  if (this.springSystem == null) {\n    throw new Error('cannot run looper without a springSystem');\n  }\n  return this.springSystem;\n}\n\n\n\nvar Loopers = Object.freeze({\n\tAnimationLooper: AnimationLooper,\n\tSimulationLooper: SimulationLooper,\n\tSteppingSimulationLooper: SteppingSimulationLooper\n});\n\n/**\n * Provides math for converting from Origami PopAnimation\n * config values to regular Origami tension and friction values. If you are\n * trying to replicate prototypes made with PopAnimation patches in Origami,\n * then you should create your springs with\n * SpringSystem.createSpringWithBouncinessAndSpeed, which uses this Math\n * internally to create a spring to match the provided PopAnimation\n * configuration from Origami.\n */\nvar BouncyConversion = function () {\n  function BouncyConversion(bounciness, speed) {\n    classCallCheck(this, BouncyConversion);\n\n    this.bounciness = bounciness;\n    this.speed = speed;\n\n    var b = this.normalize(bounciness / 1.7, 0, 20.0);\n    b = this.projectNormal(b, 0.0, 0.8);\n    var s = this.normalize(speed / 1.7, 0, 20.0);\n\n    this.bouncyTension = this.projectNormal(s, 0.5, 200);\n    this.bouncyFriction = this.quadraticOutInterpolation(b, this.b3Nobounce(this.bouncyTension), 0.01);\n  }\n\n  BouncyConversion.prototype.normalize = function normalize(value, startValue, endValue) {\n    return (value - startValue) / (endValue - startValue);\n  };\n\n  BouncyConversion.prototype.projectNormal = function projectNormal(n, start, end) {\n    return start + n * (end - start);\n  };\n\n  BouncyConversion.prototype.linearInterpolation = function linearInterpolation(t, start, end) {\n    return t * end + (1.0 - t) * start;\n  };\n\n  BouncyConversion.prototype.quadraticOutInterpolation = function quadraticOutInterpolation(t, start, end) {\n    return this.linearInterpolation(2 * t - t * t, start, end);\n  };\n\n  BouncyConversion.prototype.b3Friction1 = function b3Friction1(x) {\n    return 0.0007 * Math.pow(x, 3) - 0.031 * Math.pow(x, 2) + 0.64 * x + 1.28;\n  };\n\n  BouncyConversion.prototype.b3Friction2 = function b3Friction2(x) {\n    return 0.000044 * Math.pow(x, 3) - 0.006 * Math.pow(x, 2) + 0.36 * x + 2;\n  };\n\n  BouncyConversion.prototype.b3Friction3 = function b3Friction3(x) {\n    return 0.00000045 * Math.pow(x, 3) - 0.000332 * Math.pow(x, 2) + 0.1078 * x + 5.84;\n  };\n\n  BouncyConversion.prototype.b3Nobounce = function b3Nobounce(tension) {\n    var friction = 0;\n    if (tension <= 18) {\n      friction = this.b3Friction1(tension);\n    } else if (tension > 18 && tension <= 44) {\n      friction = this.b3Friction2(tension);\n    } else {\n      friction = this.b3Friction3(tension);\n    }\n    return friction;\n  };\n\n  return BouncyConversion;\n}();\n\n/**\n * Maintains a set of tension and friction constants\n * for a Spring. You can use fromOrigamiTensionAndFriction to convert\n * values from the [Origami](http://facebook.github.io/origami/)\n * design tool directly to Rebound spring constants.\n * @public\n */\n\nvar SpringConfig = function () {\n\n  /**\n   * Convert an origami Spring tension and friction to Rebound spring\n   * constants. If you are prototyping a design with Origami, this\n   * makes it easy to make your springs behave exactly the same in\n   * Rebound.\n   * @public\n   */\n  SpringConfig.fromOrigamiTensionAndFriction = function fromOrigamiTensionAndFriction(tension, friction) {\n    return new SpringConfig(tensionFromOrigamiValue(tension), frictionFromOrigamiValue(friction));\n  };\n\n  /**\n   * Convert an origami PopAnimation Spring bounciness and speed to Rebound\n   * spring constants. If you are using PopAnimation patches in Origami, this\n   * utility will provide springs that match your prototype.\n   * @public\n   */\n\n\n  SpringConfig.fromBouncinessAndSpeed = function fromBouncinessAndSpeed(bounciness, speed) {\n    var bouncyConversion = new BouncyConversion(bounciness, speed);\n    return SpringConfig.fromOrigamiTensionAndFriction(bouncyConversion.bouncyTension, bouncyConversion.bouncyFriction);\n  };\n\n  /**\n   * Create a SpringConfig with no tension or a coasting spring with some\n   * amount of Friction so that it does not coast infininitely.\n   * @public\n   */\n\n\n  SpringConfig.coastingConfigWithOrigamiFriction = function coastingConfigWithOrigamiFriction(friction) {\n    return new SpringConfig(0, frictionFromOrigamiValue(friction));\n  };\n\n  function SpringConfig(tension, friction) {\n    classCallCheck(this, SpringConfig);\n\n    this.tension = tension;\n    this.friction = friction;\n  }\n\n  return SpringConfig;\n}();\n\nSpringConfig.DEFAULT_ORIGAMI_SPRING_CONFIG = SpringConfig.fromOrigamiTensionAndFriction(40, 7);\n\n/**\n * Consists of a position and velocity. A Spring uses\n * this internally to keep track of its current and prior position and\n * velocity values.\n */\nvar PhysicsState = function PhysicsState() {\n  classCallCheck(this, PhysicsState);\n  this.position = 0;\n  this.velocity = 0;\n};\n\n/**\n * Provides a model of a classical spring acting to\n * resolve a body to equilibrium. Springs have configurable\n * tension which is a force multipler on the displacement of the\n * spring from its rest point or `endValue` as defined by [Hooke's\n * law](http://en.wikipedia.org/wiki/Hooke's_law). Springs also have\n * configurable friction, which ensures that they do not oscillate\n * infinitely. When a Spring is displaced by updating it's resting\n * or `currentValue`, the SpringSystems that contain that Spring\n * will automatically start looping to solve for equilibrium. As each\n * timestep passes, `SpringListener` objects attached to the Spring\n * will be notified of the updates providing a way to drive an\n * animation off of the spring's resolution curve.\n * @public\n */\n\nvar Spring = function () {\n  function Spring(springSystem) {\n    classCallCheck(this, Spring);\n    this.listeners = [];\n    this._startValue = 0;\n    this._currentState = new PhysicsState();\n    this._displacementFromRestThreshold = 0.001;\n    this._endValue = 0;\n    this._overshootClampingEnabled = false;\n    this._previousState = new PhysicsState();\n    this._restSpeedThreshold = 0.001;\n    this._tempState = new PhysicsState();\n    this._timeAccumulator = 0;\n    this._wasAtRest = true;\n\n    this._id = 's' + Spring._ID++;\n    this._springSystem = springSystem;\n  }\n\n  /**\n   * Remove a Spring from simulation and clear its listeners.\n   * @public\n   */\n\n\n  Spring.prototype.destroy = function destroy() {\n    this.listeners = [];\n    this._springSystem.deregisterSpring(this);\n  };\n\n  /**\n   * Get the id of the spring, which can be used to retrieve it from\n   * the SpringSystems it participates in later.\n   * @public\n   */\n\n\n  Spring.prototype.getId = function getId() {\n    return this._id;\n  };\n\n  /**\n   * Set the configuration values for this Spring. A SpringConfig\n   * contains the tension and friction values used to solve for the\n   * equilibrium of the Spring in the physics loop.\n   * @public\n   */\n\n\n  Spring.prototype.setSpringConfig = function setSpringConfig(springConfig) {\n    this._springConfig = springConfig;\n    return this;\n  };\n\n  /**\n   * Retrieve the SpringConfig used by this Spring.\n   * @public\n   */\n\n\n  Spring.prototype.getSpringConfig = function getSpringConfig() {\n    return this._springConfig;\n  };\n\n  /**\n   * Set the current position of this Spring. Listeners will be updated\n   * with this value immediately. If the rest or `endValue` is not\n   * updated to match this value, then the spring will be dispalced and\n   * the SpringSystem will start to loop to restore the spring to the\n   * `endValue`.\n   *\n   * A common pattern is to move a Spring around without animation by\n   * calling.\n   *\n   * ```\n   * spring.setCurrentValue(n).setAtRest();\n   * ```\n   *\n   * This moves the Spring to a new position `n`, sets the endValue\n   * to `n`, and removes any velocity from the `Spring`. By doing\n   * this you can allow the `SpringListener` to manage the position\n   * of UI elements attached to the spring even when moving without\n   * animation. For example, when dragging an element you can\n   * update the position of an attached view through a spring\n   * by calling `spring.setCurrentValue(x)`. When\n   * the gesture ends you can update the Springs\n   * velocity and endValue\n   * `spring.setVelocity(gestureEndVelocity).setEndValue(flingTarget)`\n   * to cause it to naturally animate the UI element to the resting\n   * position taking into account existing velocity. The codepaths for\n   * synchronous movement and spring driven animation can\n   * be unified using this technique.\n   * @public\n   */\n\n\n  Spring.prototype.setCurrentValue = function setCurrentValue(currentValue, skipSetAtRest) {\n    this._startValue = currentValue;\n    this._currentState.position = currentValue;\n    if (!skipSetAtRest) {\n      this.setAtRest();\n    }\n    this.notifyPositionUpdated(false, false);\n    return this;\n  };\n\n  /**\n   * Get the position that the most recent animation started at. This\n   * can be useful for determining the number off oscillations that\n   * have occurred.\n   * @public\n   */\n\n\n  Spring.prototype.getStartValue = function getStartValue() {\n    return this._startValue;\n  };\n\n  /**\n   * Retrieve the current value of the Spring.\n   * @public\n   */\n\n\n  Spring.prototype.getCurrentValue = function getCurrentValue() {\n    return this._currentState.position;\n  };\n\n  /**\n   * Get the absolute distance of the Spring from its resting endValue\n   * position.\n   * @public\n   */\n\n\n  Spring.prototype.getCurrentDisplacementDistance = function getCurrentDisplacementDistance() {\n    return this.getDisplacementDistanceForState(this._currentState);\n  };\n\n  /**\n   * Get the absolute distance of the Spring from a given state value\n   */\n\n\n  Spring.prototype.getDisplacementDistanceForState = function getDisplacementDistanceForState(state) {\n    return Math.abs(this._endValue - state.position);\n  };\n\n  /**\n   * Set the endValue or resting position of the spring. If this\n   * value is different than the current value, the SpringSystem will\n   * be notified and will begin running its solver loop to resolve\n   * the Spring to equilibrium. Any listeners that are registered\n   * for onSpringEndStateChange will also be notified of this update\n   * immediately.\n   * @public\n   */\n\n\n  Spring.prototype.setEndValue = function setEndValue(endValue) {\n    if (this._endValue === endValue && this.isAtRest()) {\n      return this;\n    }\n    this._startValue = this.getCurrentValue();\n    this._endValue = endValue;\n    this._springSystem.activateSpring(this.getId());\n    for (var i = 0, len = this.listeners.length; i < len; i++) {\n      var listener = this.listeners[i];\n      var onChange = listener.onSpringEndStateChange;\n      onChange && onChange(this);\n    }\n    return this;\n  };\n\n  /**\n   * Retrieve the endValue or resting position of this spring.\n   * @public\n   */\n\n\n  Spring.prototype.getEndValue = function getEndValue() {\n    return this._endValue;\n  };\n\n  /**\n   * Set the current velocity of the Spring, in pixels per second. As\n   * previously mentioned, this can be useful when you are performing\n   * a direct manipulation gesture. When a UI element is released you\n   * may call setVelocity on its animation Spring so that the Spring\n   * continues with the same velocity as the gesture ended with. The\n   * friction, tension, and displacement of the Spring will then\n   * govern its motion to return to rest on a natural feeling curve.\n   * @public\n   */\n\n\n  Spring.prototype.setVelocity = function setVelocity(velocity) {\n    if (velocity === this._currentState.velocity) {\n      return this;\n    }\n    this._currentState.velocity = velocity;\n    this._springSystem.activateSpring(this.getId());\n    return this;\n  };\n\n  /**\n   * Get the current velocity of the Spring, in pixels per second.\n   * @public\n   */\n\n\n  Spring.prototype.getVelocity = function getVelocity() {\n    return this._currentState.velocity;\n  };\n\n  /**\n   * Set a threshold value for the movement speed of the Spring below\n   * which it will be considered to be not moving or resting.\n   * @public\n   */\n\n\n  Spring.prototype.setRestSpeedThreshold = function setRestSpeedThreshold(restSpeedThreshold) {\n    this._restSpeedThreshold = restSpeedThreshold;\n    return this;\n  };\n\n  /**\n   * Retrieve the rest speed threshold for this Spring.\n   * @public\n   */\n\n\n  Spring.prototype.getRestSpeedThreshold = function getRestSpeedThreshold() {\n    return this._restSpeedThreshold;\n  };\n\n  /**\n   * Set a threshold value for displacement below which the Spring\n   * will be considered to be not displaced i.e. at its resting\n   * `endValue`.\n   * @public\n   */\n\n\n  Spring.prototype.setRestDisplacementThreshold = function setRestDisplacementThreshold(displacementFromRestThreshold) {\n    this._displacementFromRestThreshold = displacementFromRestThreshold;\n  };\n\n  /**\n   * Retrieve the rest displacement threshold for this spring.\n   * @public\n   */\n\n\n  Spring.prototype.getRestDisplacementThreshold = function getRestDisplacementThreshold() {\n    return this._displacementFromRestThreshold;\n  };\n\n  /**\n   * Enable overshoot clamping. This means that the Spring will stop\n   * immediately when it reaches its resting position regardless of\n   * any existing momentum it may have. This can be useful for certain\n   * types of animations that should not oscillate such as a scale\n   * down to 0 or alpha fade.\n   * @public\n   */\n\n\n  Spring.prototype.setOvershootClampingEnabled = function setOvershootClampingEnabled(enabled) {\n    this._overshootClampingEnabled = enabled;\n    return this;\n  };\n\n  /**\n   * Check if overshoot clamping is enabled for this spring.\n   * @public\n   */\n\n\n  Spring.prototype.isOvershootClampingEnabled = function isOvershootClampingEnabled() {\n    return this._overshootClampingEnabled;\n  };\n\n  /**\n   * Check if the Spring has gone past its end point by comparing\n   * the direction it was moving in when it started to the current\n   * position and end value.\n   * @public\n   */\n\n\n  Spring.prototype.isOvershooting = function isOvershooting() {\n    var start = this._startValue;\n    var end = this._endValue;\n    return this._springConfig.tension > 0 && (start < end && this.getCurrentValue() > end || start > end && this.getCurrentValue() < end);\n  };\n\n  /**\n   * The main solver method for the Spring. It takes\n   * the current time and delta since the last time step and performs\n   * an RK4 integration to get the new position and velocity state\n   * for the Spring based on the tension, friction, velocity, and\n   * displacement of the Spring.\n   * @public\n   */\n\n\n  Spring.prototype.advance = function advance(time, realDeltaTime) {\n    var isAtRest = this.isAtRest();\n\n    if (isAtRest && this._wasAtRest) {\n      return;\n    }\n\n    var adjustedDeltaTime = realDeltaTime;\n    if (realDeltaTime > Spring.MAX_DELTA_TIME_SEC) {\n      adjustedDeltaTime = Spring.MAX_DELTA_TIME_SEC;\n    }\n\n    this._timeAccumulator += adjustedDeltaTime;\n\n    var tension = this._springConfig.tension;\n    var friction = this._springConfig.friction;\n    var position = this._currentState.position;\n    var velocity = this._currentState.velocity;\n    var tempPosition = this._tempState.position;\n    var tempVelocity = this._tempState.velocity;\n    var aVelocity = void 0;\n    var aAcceleration = void 0;\n    var bVelocity = void 0;\n    var bAcceleration = void 0;\n    var cVelocity = void 0;\n    var cAcceleration = void 0;\n    var dVelocity = void 0;\n    var dAcceleration = void 0;\n    var dxdt = void 0;\n    var dvdt = void 0;\n\n    while (this._timeAccumulator >= Spring.SOLVER_TIMESTEP_SEC) {\n      this._timeAccumulator -= Spring.SOLVER_TIMESTEP_SEC;\n\n      if (this._timeAccumulator < Spring.SOLVER_TIMESTEP_SEC) {\n        this._previousState.position = position;\n        this._previousState.velocity = velocity;\n      }\n\n      aVelocity = velocity;\n      aAcceleration = tension * (this._endValue - tempPosition) - friction * velocity;\n\n      tempPosition = position + aVelocity * Spring.SOLVER_TIMESTEP_SEC * 0.5;\n      tempVelocity = velocity + aAcceleration * Spring.SOLVER_TIMESTEP_SEC * 0.5;\n      bVelocity = tempVelocity;\n      bAcceleration = tension * (this._endValue - tempPosition) - friction * tempVelocity;\n\n      tempPosition = position + bVelocity * Spring.SOLVER_TIMESTEP_SEC * 0.5;\n      tempVelocity = velocity + bAcceleration * Spring.SOLVER_TIMESTEP_SEC * 0.5;\n      cVelocity = tempVelocity;\n      cAcceleration = tension * (this._endValue - tempPosition) - friction * tempVelocity;\n\n      tempPosition = position + cVelocity * Spring.SOLVER_TIMESTEP_SEC;\n      tempVelocity = velocity + cAcceleration * Spring.SOLVER_TIMESTEP_SEC;\n      dVelocity = tempVelocity;\n      dAcceleration = tension * (this._endValue - tempPosition) - friction * tempVelocity;\n\n      dxdt = 1.0 / 6.0 * (aVelocity + 2.0 * (bVelocity + cVelocity) + dVelocity);\n      dvdt = 1.0 / 6.0 * (aAcceleration + 2.0 * (bAcceleration + cAcceleration) + dAcceleration);\n\n      position += dxdt * Spring.SOLVER_TIMESTEP_SEC;\n      velocity += dvdt * Spring.SOLVER_TIMESTEP_SEC;\n    }\n\n    this._tempState.position = tempPosition;\n    this._tempState.velocity = tempVelocity;\n\n    this._currentState.position = position;\n    this._currentState.velocity = velocity;\n\n    if (this._timeAccumulator > 0) {\n      this._interpolate(this._timeAccumulator / Spring.SOLVER_TIMESTEP_SEC);\n    }\n\n    if (this.isAtRest() || this._overshootClampingEnabled && this.isOvershooting()) {\n      if (this._springConfig.tension > 0) {\n        this._startValue = this._endValue;\n        this._currentState.position = this._endValue;\n      } else {\n        this._endValue = this._currentState.position;\n        this._startValue = this._endValue;\n      }\n      this.setVelocity(0);\n      isAtRest = true;\n    }\n\n    var notifyActivate = false;\n    if (this._wasAtRest) {\n      this._wasAtRest = false;\n      notifyActivate = true;\n    }\n\n    var notifyAtRest = false;\n    if (isAtRest) {\n      this._wasAtRest = true;\n      notifyAtRest = true;\n    }\n\n    this.notifyPositionUpdated(notifyActivate, notifyAtRest);\n  };\n\n  Spring.prototype.notifyPositionUpdated = function notifyPositionUpdated(notifyActivate, notifyAtRest) {\n    for (var i = 0, len = this.listeners.length; i < len; i++) {\n      var listener = this.listeners[i];\n      if (notifyActivate && listener.onSpringActivate) {\n        listener.onSpringActivate(this);\n      }\n\n      if (listener.onSpringUpdate) {\n        listener.onSpringUpdate(this);\n      }\n\n      if (notifyAtRest && listener.onSpringAtRest) {\n        listener.onSpringAtRest(this);\n      }\n    }\n  };\n\n  /**\n   * Check if the SpringSystem should advance. Springs are advanced\n   * a final frame after they reach equilibrium to ensure that the\n   * currentValue is exactly the requested endValue regardless of the\n   * displacement threshold.\n   * @public\n   */\n\n\n  Spring.prototype.systemShouldAdvance = function systemShouldAdvance() {\n    return !this.isAtRest() || !this.wasAtRest();\n  };\n\n  Spring.prototype.wasAtRest = function wasAtRest() {\n    return this._wasAtRest;\n  };\n\n  /**\n   * Check if the Spring is atRest meaning that it's currentValue and\n   * endValue are the same and that it has no velocity. The previously\n   * described thresholds for speed and displacement define the bounds\n   * of this equivalence check. If the Spring has 0 tension, then it will\n   * be considered at rest whenever its absolute velocity drops below the\n   * restSpeedThreshold.\n   * @public\n   */\n\n\n  Spring.prototype.isAtRest = function isAtRest() {\n    return Math.abs(this._currentState.velocity) < this._restSpeedThreshold && (this.getDisplacementDistanceForState(this._currentState) <= this._displacementFromRestThreshold || this._springConfig.tension === 0);\n  };\n\n  /**\n   * Force the spring to be at rest at its current position. As\n   * described in the documentation for setCurrentValue, this method\n   * makes it easy to do synchronous non-animated updates to ui\n   * elements that are attached to springs via SpringListeners.\n   * @public\n   */\n\n\n  Spring.prototype.setAtRest = function setAtRest() {\n    this._endValue = this._currentState.position;\n    this._tempState.position = this._currentState.position;\n    this._currentState.velocity = 0;\n    return this;\n  };\n\n  Spring.prototype._interpolate = function _interpolate(alpha) {\n    this._currentState.position = this._currentState.position * alpha + this._previousState.position * (1 - alpha);\n    this._currentState.velocity = this._currentState.velocity * alpha + this._previousState.velocity * (1 - alpha);\n  };\n\n  Spring.prototype.getListeners = function getListeners() {\n    return this.listeners;\n  };\n\n  Spring.prototype.addListener = function addListener(newListener) {\n    this.listeners.push(newListener);\n    return this;\n  };\n\n  Spring.prototype.removeListener = function removeListener(listenerToRemove) {\n    removeFirst(this.listeners, listenerToRemove);\n    return this;\n  };\n\n  Spring.prototype.removeAllListeners = function removeAllListeners() {\n    this.listeners = [];\n    return this;\n  };\n\n  Spring.prototype.currentValueIsApproximately = function currentValueIsApproximately(value) {\n    return Math.abs(this.getCurrentValue() - value) <= this.getRestDisplacementThreshold();\n  };\n\n  return Spring;\n}();\n\nSpring._ID = 0;\nSpring.MAX_DELTA_TIME_SEC = 0.064;\nSpring.SOLVER_TIMESTEP_SEC = 0.001;\n\n/**\n * A set of Springs that all run on the same physics\n * timing loop. To get started with a Rebound animation, first\n * create a new SpringSystem and then add springs to it.\n * @public\n */\n\nvar SpringSystem = function () {\n  function SpringSystem(looper) {\n    classCallCheck(this, SpringSystem);\n    this.listeners = [];\n    this._activeSprings = [];\n    this._idleSpringIndices = [];\n    this._isIdle = true;\n    this._lastTimeMillis = -1;\n    this._springRegistry = {};\n\n    this.looper = looper || new AnimationLooper();\n    this.looper.springSystem = this;\n  }\n\n  /**\n   * A SpringSystem is iterated by a looper. The looper is responsible\n   * for executing each frame as the SpringSystem is resolved to idle.\n   * There are three types of Loopers described below AnimationLooper,\n   * SimulationLooper, and SteppingSimulationLooper. AnimationLooper is\n   * the default as it is the most useful for common UI animations.\n   * @public\n   */\n\n\n  SpringSystem.prototype.setLooper = function setLooper(looper) {\n    this.looper = looper;\n    looper.springSystem = this;\n  };\n\n  /**\n   * Add a new spring to this SpringSystem. This Spring will now be solved for\n   * during the physics iteration loop. By default the spring will use the\n   * default Origami spring config with 40 tension and 7 friction, but you can\n   * also provide your own values here.\n   * @public\n   */\n\n\n  SpringSystem.prototype.createSpring = function createSpring(tension, friction) {\n    var springConfig = void 0;\n    if (tension === undefined || friction === undefined) {\n      springConfig = SpringConfig.DEFAULT_ORIGAMI_SPRING_CONFIG;\n    } else {\n      springConfig = SpringConfig.fromOrigamiTensionAndFriction(tension, friction);\n    }\n    return this.createSpringWithConfig(springConfig);\n  };\n\n  /**\n   * Add a spring with a specified bounciness and speed. To replicate Origami\n   * compositions based on PopAnimation patches, use this factory method to\n   * create matching springs.\n   * @public\n   */\n\n\n  SpringSystem.prototype.createSpringWithBouncinessAndSpeed = function createSpringWithBouncinessAndSpeed(bounciness, speed) {\n    var springConfig = void 0;\n    if (bounciness === undefined || speed === undefined) {\n      springConfig = SpringConfig.DEFAULT_ORIGAMI_SPRING_CONFIG;\n    } else {\n      springConfig = SpringConfig.fromBouncinessAndSpeed(bounciness, speed);\n    }\n    return this.createSpringWithConfig(springConfig);\n  };\n\n  /**\n   * Add a spring with the provided SpringConfig.\n   * @public\n   */\n\n\n  SpringSystem.prototype.createSpringWithConfig = function createSpringWithConfig(springConfig) {\n    var spring = new Spring(this);\n    this.registerSpring(spring);\n    spring.setSpringConfig(springConfig);\n    return spring;\n  };\n\n  /**\n   * Check if a SpringSystem is idle or active. If all of the Springs in the\n   * SpringSystem are at rest, i.e. the physics forces have reached equilibrium,\n   * then this method will return true.\n   * @public\n   */\n\n\n  SpringSystem.prototype.getIsIdle = function getIsIdle() {\n    return this._isIdle;\n  };\n\n  /**\n   * Retrieve a specific Spring from the SpringSystem by id. This\n   * can be useful for inspecting the state of a spring before\n   * or after an integration loop in the SpringSystem executes.\n   * @public\n   */\n\n\n  SpringSystem.prototype.getSpringById = function getSpringById(id) {\n    return this._springRegistry[id];\n  };\n\n  /**\n   * Get a listing of all the springs registered with this\n   * SpringSystem.\n   * @public\n   */\n\n\n  SpringSystem.prototype.getAllSprings = function getAllSprings() {\n    var vals = [];\n    for (var _id in this._springRegistry) {\n      if (this._springRegistry.hasOwnProperty(_id)) {\n        vals.push(this._springRegistry[_id]);\n      }\n    }\n    return vals;\n  };\n\n  /**\n   * Manually add a spring to this system. This is called automatically\n   * if a Spring is created with SpringSystem#createSpring.\n   *\n   * This method sets the spring up in the registry so that it can be solved\n   * in the solver loop.\n   * @public\n   */\n\n\n  SpringSystem.prototype.registerSpring = function registerSpring(spring) {\n    this._springRegistry[spring.getId()] = spring;\n  };\n\n  /**\n   * Deregister a spring with this SpringSystem. The SpringSystem will\n   * no longer consider this Spring during its integration loop once\n   * this is called. This is normally done automatically for you when\n   * you call Spring#destroy.\n   * @public\n   */\n\n\n  SpringSystem.prototype.deregisterSpring = function deregisterSpring(spring) {\n    removeFirst(this._activeSprings, spring);\n    delete this._springRegistry[spring.getId()];\n  };\n\n  SpringSystem.prototype.advance = function advance(time, deltaTime) {\n    while (this._idleSpringIndices.length > 0) {\n      this._idleSpringIndices.pop();\n    }\n    for (var i = 0, len = this._activeSprings.length; i < len; i++) {\n      var spring = this._activeSprings[i];\n      if (spring.systemShouldAdvance()) {\n        spring.advance(time / 1000.0, deltaTime / 1000.0);\n      } else {\n        this._idleSpringIndices.push(this._activeSprings.indexOf(spring));\n      }\n    }\n    while (this._idleSpringIndices.length > 0) {\n      var idx = this._idleSpringIndices.pop();\n      idx >= 0 && this._activeSprings.splice(idx, 1);\n    }\n  };\n\n  /**\n   * This is the main solver loop called to move the simulation\n   * forward through time. Before each pass in the solver loop\n   * onBeforeIntegrate is called on an any listeners that have\n   * registered themeselves with the SpringSystem. This gives you\n   * an opportunity to apply any constraints or adjustments to\n   * the springs that should be enforced before each iteration\n   * loop. Next the advance method is called to move each Spring in\n   * the systemShouldAdvance forward to the current time. After the\n   * integration step runs in advance, onAfterIntegrate is called\n   * on any listeners that have registered themselves with the\n   * SpringSystem. This gives you an opportunity to run any post\n   * integration constraints or adjustments on the Springs in the\n   * SpringSystem.\n   * @public\n   */\n\n\n  SpringSystem.prototype.loop = function loop(currentTimeMillis) {\n    var listener = void 0;\n    if (this._lastTimeMillis === -1) {\n      this._lastTimeMillis = currentTimeMillis - 1;\n    }\n    var ellapsedMillis = currentTimeMillis - this._lastTimeMillis;\n    this._lastTimeMillis = currentTimeMillis;\n\n    var i = 0;\n    var len = this.listeners.length;\n    for (i = 0; i < len; i++) {\n      listener = this.listeners[i];\n      listener.onBeforeIntegrate && listener.onBeforeIntegrate(this);\n    }\n\n    this.advance(currentTimeMillis, ellapsedMillis);\n    if (this._activeSprings.length === 0) {\n      this._isIdle = true;\n      this._lastTimeMillis = -1;\n    }\n\n    for (i = 0; i < len; i++) {\n      listener = this.listeners[i];\n      listener.onAfterIntegrate && listener.onAfterIntegrate(this);\n    }\n\n    if (!this._isIdle) {\n      this.looper.run();\n    }\n  };\n\n  /**\n   * Used to notify the SpringSystem that a Spring has become displaced.\n   * The system responds by starting its solver loop up if it is currently idle.\n   */\n\n\n  SpringSystem.prototype.activateSpring = function activateSpring(springId) {\n    var spring = this._springRegistry[springId];\n    if (this._activeSprings.indexOf(spring) === -1) {\n      this._activeSprings.push(spring);\n    }\n    if (this.getIsIdle()) {\n      this._isIdle = false;\n      this.looper.run();\n    }\n  };\n\n  /**\n   * Add a listener to the SpringSystem to receive before/after integration\n   * notifications allowing Springs to be constrained or adjusted.\n   * @public\n   */\n\n\n  SpringSystem.prototype.addListener = function addListener(listener) {\n    this.listeners.push(listener);\n  };\n\n  /**\n   * Remove a previously added listener on the SpringSystem.\n   * @public\n   */\n\n\n  SpringSystem.prototype.removeListener = function removeListener(listener) {\n    removeFirst(this.listeners, listener);\n  };\n\n  /**\n   * Remove all previously added listeners on the SpringSystem.\n   * @public\n   */\n\n\n  SpringSystem.prototype.removeAllListeners = function removeAllListeners() {\n    this.listeners = [];\n  };\n\n  return SpringSystem;\n}();\n\nvar index = _extends({}, Loopers, {\n  OrigamiValueConverter: OrigamiValueConverter,\n  MathUtil: MathUtil,\n  Spring: Spring,\n  SpringConfig: SpringConfig,\n  SpringSystem: SpringSystem,\n  util: _extends({}, util, MathUtil)\n});\n\nreturn index;\n\n})));\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar invariant = function(condition, format, a, b, c, d, e, f) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error(\n        'Minified exception occurred; use the non-minified dev environment ' +\n        'for the full error message and additional helpful warnings.'\n      );\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(\n        format.replace(/%s/g, function() { return args[argIndex++]; })\n      );\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n};\n\nmodule.exports = invariant;\n","// @flow\nimport invariant from 'invariant';\n\nconst canvas = document.getElementById('canvas');\ninvariant(canvas && canvas instanceof HTMLCanvasElement, 'canvas must exist');\nconst ctx = canvas.getContext('2d');\n\nconst body = document.body;\ninvariant(body, 'body must exist');\n\nconst width = body.clientWidth;\nconst height = body.clientHeight;\nconst vw = width / 100;\nconst vh = height / 100;\nconst scale = window.devicePixelRatio || 1;\n\ncanvas.width = width * scale;\ncanvas.height = height * scale;\ncanvas.style.width = `${width}px`;\ncanvas.style.height = `${height}px`;\nctx.scale(scale, scale);\n\nexport { canvas, ctx, width, height, scale, vw, vh };\n","// @flow\nimport rebound from 'rebound';\nimport { vw, vh } from './canvas';\n\nconst HEAD_TENSION = 30;\nconst HEAD_FRICTION = 2;\nconst HEAD_DEFAULT_X = 50 * vw;\nconst HEAD_DEFAULT_Y = 50 * vh;\n\nconst looper = new rebound.SteppingSimulationLooper();\nconst springSystem = new rebound.SpringSystem(looper);\n\nlet isCatHeadLocked = true;\nexport const lockCatHead = () => {\n  isCatHeadLocked = true;\n};\nexport const unlockCatHead = () => {\n  isCatHeadLocked = false;\n};\n\nconst catHeadXSpring = springSystem.createSpring(HEAD_TENSION, HEAD_FRICTION);\nconst catHeadYSpring = springSystem.createSpring(HEAD_TENSION, HEAD_FRICTION);\ncatHeadXSpring.setCurrentValue(HEAD_DEFAULT_X);\ncatHeadYSpring.setCurrentValue(HEAD_DEFAULT_Y);\n\nexport const getCatHeadPosition = (): { x: number, y: number } => ({\n  x: catHeadXSpring.getCurrentValue(),\n  y: catHeadYSpring.getCurrentValue(),\n});\n\nexport const translateCatHead = (dx: number, dy: number) => {\n  catHeadXSpring.setEndValue(catHeadXSpring.getEndValue() + dx);\n  catHeadYSpring.setEndValue(catHeadYSpring.getEndValue() + dy);\n};\n\nexport const tick = (dt: number) => {\n  if (isCatHeadLocked) {\n    catHeadXSpring.setEndValue(HEAD_DEFAULT_X);\n    catHeadYSpring.setEndValue(HEAD_DEFAULT_Y);\n  }\n\n  looper.step(dt);\n};\n","// @flow\nimport { width, height, ctx, vw, vh } from './canvas';\nimport { getCatHeadPosition } from './simulation';\n\nconst EYE_COLOR = '#97DB4F';\nconst BOD_COLOR = '#42253B';\nconst DETAIL_COLOR = 'rgba(255, 255, 255, 0.5)';\nconst BG_1 = '#F1FFE7';\nconst BG_2 = '#C2E7DA';\nconst BG_3 = '#6290C3';\n\nconst draw = () => {\n  ctx.fillStyle = BG_1;\n  ctx.fillRect(0, 0, width, height);\n  ctx.fillStyle = BG_2;\n  ctx.fillRect(0, 80 * vh, width, 20 * vh);\n\n  ctx.beginPath();\n  const catHeadPosition = getCatHeadPosition();\n  ctx.arc(catHeadPosition.x, catHeadPosition.y, 10 * vh, 0, 2 * Math.PI);\n  ctx.fillStyle = BOD_COLOR;\n  ctx.fill();\n};\n\nexport default draw;\n","// @flow\nimport 'pepjs';\nimport * as simulation from './simulation';\nimport draw from './draw';\n\ntype Drag = {\n  startX: number,\n  startY: number,\n  currentX: number,\n  currentY: number,\n};\n\nlet drag: Drag | null = null;\nconst onPointerDown = (e: MouseEvent) => {\n  drag = {\n    startX: e.clientX,\n    startY: e.clientY,\n    currentX: e.clientX,\n    currentY: e.clientY,\n  };\n\n  simulation.unlockCatHead();\n};\nconst onPointerMove = (e: MouseEvent) => {\n  if (!drag) return;\n  const lastX = drag.currentX;\n  const lastY = drag.currentY;\n  drag.currentX = e.clientX;\n  drag.currentY = e.clientY;\n\n  simulation.translateCatHead(drag.currentX - lastX, drag.currentY - lastY);\n};\nconst onPointerUp = (e: MouseEvent) => {\n  if (!drag) return;\n  drag = null;\n  simulation.lockCatHead();\n};\n\n// $FlowFixMe - flow doesnt know about pointer events\ndocument.addEventListener('pointerdown', onPointerDown, false);\n// $FlowFixMe - flow doesnt know about pointer events\ndocument.addEventListener('pointermove', onPointerMove, false);\n// $FlowFixMe - flow doesnt know about pointer events\ndocument.addEventListener('pointerup', onPointerUp, false);\n\nlet lastT = null;\nconst step = t => {\n  if (lastT !== null) {\n    const dt = t - lastT;\n    simulation.tick(dt);\n    draw();\n  }\n\n  lastT = t;\n  window.requestAnimationFrame(step);\n};\n\nwindow.requestAnimationFrame(step);\n\n// auto-refresh in dev mode\n// $FlowFixMe - this isn't included in flow's module typedef\nif (module.hot) module.hot.dispose(() => window.location.reload());\n"]}